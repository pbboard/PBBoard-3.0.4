!function(){"use strict";function e(e,t){return typeof t===e}function t(e){return!Object.keys(e).length}function n(e,t){function o(e){return null!==e&&"object"==typeof e&&Object.getPrototypeOf(e)===Object.prototype}for(var r=!!e===e,i=r?2:1,a=r?t:e,l=r&&e;i<arguments.length;i++){var s,c=arguments[i];for(s in c){var u,d,f=a[s],p=c[s];se(p)||"__proto__"!==s&&"constructor"!==s&&(d=o(p),u=Array.isArray(p),l&&(d||u)?(d=o(f)===d&&Array.isArray(f)===u,a[s]=n(!0,d?f:u?[]:{},p)):a[s]=p)}}return a}function o(e,t){-1<(t=e.indexOf(t))&&e.splice(t,1)}function r(e,t){if(Array.isArray(e)||"length"in e&&ue(e.length))for(var n=0;n<e.length;n++)t(n,e[n]);else Object.keys(e).forEach(function(n){t(n,e[n])})}function i(e){return isFinite(e=parseFloat(e))?e:0}function a(e,t,n){var o=(n||document).createElement(e);return r(t||{},function(e,t){"style"===e?o.style.cssText=t:e in o?o[e]=t:o.setAttribute(e,t)}),o}function l(e,t){for(var n=e||{};(n=n.parentNode)&&!/(9|11)/.test(n.nodeType);)if(!t||w(n,t))return n}function s(e,t){return w(e,t)?e:l(e,t)}function c(e){e.parentNode&&e.parentNode.removeChild(e)}function u(e,t){e.appendChild(t)}function d(e,t){return e.querySelectorAll(t)}function f(e,t,n,o,r){t.split(" ").forEach(function(t){var i;le(n)?(i=o["_sce-event-"+t+n]||function(t){for(var r=t.target;r&&r!==e;){if(w(r,n))return void o.call(r,t);r=r.parentNode}},o["_sce-event-"+t+n]=i):(i=n,r=o),e.addEventListener(t,i,r||!1)})}function p(e,t,n,o,r){t.split(" ").forEach(function(t){var i;le(n)?i=o["_sce-event-"+t+n]:(i=n,r=o),e.removeEventListener(t,i,r||!1)})}function m(e,t,n){return arguments.length<3?e.getAttribute(t):void(null==n?h(e,t):e.setAttribute(t,n))}function h(e,t){e.removeAttribute(t)}function g(e){b(e,"display","none")}function v(e){b(e,"display","")}function y(e){(R(e)?g:v)(e)}function b(e,t,n){if(arguments.length<3){if(le(t))return 1===e.nodeType?getComputedStyle(e)[t]:null;r(t,function(t,n){b(e,t,n)})}else{var o=(n||0===n)&&!isNaN(n);e.style[t]=o?n+"px":n}}function x(e,t,n){var o=arguments.length,i={};return 1===e.nodeType?1===o?(r(e.attributes,function(e,t){/^data\-/i.test(t.name)&&(i[t.name.substr(5)]=t.value)}),i):2===o?m(e,"data-"+t):void m(e,"data-"+t,String(n)):void 0}function w(e,t){return!!e&&1===e.nodeType&&(e.matches||e.msMatchesSelector||e.webkitMatchesSelector).call(e,t)}function k(e,t){return t.parentNode.insertBefore(e,t)}function T(e){return e.className.trim().split(/\s+/)}function C(e,t){return w(e,"."+t)}function S(e,t){var n=T(e);0>n.indexOf(t)&&n.push(t),e.className=n.join(" ")}function E(e,t){var n=T(e);o(n,t),e.className=n.join(" ")}function D(e,t,n){((n=se(n)?!C(e,t):n)?S:E)(e,t)}function N(e,t){if(se(t)){var n=i((o=getComputedStyle(e)).paddingLeft)+i(o.paddingRight),o=i(o.borderLeftWidth)+i(o.borderRightWidth);return e.offsetWidth-n-o}b(e,"width",t)}function A(e,t){if(se(t)){var n=i((o=getComputedStyle(e)).paddingTop)+i(o.paddingBottom),o=i(o.borderTopWidth)+i(o.borderBottomWidth);return e.offsetHeight-n-o}b(e,"height",t)}function M(e,t,n){var o;ce(window.CustomEvent)?o=new CustomEvent(t,{bubbles:!0,cancelable:!0,detail:n}):(o=e.ownerDocument.createEvent("CustomEvent")).initCustomEvent(t,!0,!0,n),e.dispatchEvent(o)}function R(e){return e.getClientRects().length}function _(e,t,n,o,r){for(e=r?e.lastChild:e.firstChild;e;){var i=r?e.previousSibling:e.nextSibling;if(!n&&!1===t(e)||!o&&!1===_(e,t,n,o,r)||n&&!1===t(e))return!1;e=i}}function O(e,t,n,o){_(e,t,n,o,!0)}function H(e,t){var n=(t=t||document).createDocumentFragment(),o=a("div",{},t);for(o.innerHTML=e;o.firstChild;)u(n,o.firstChild);return n}function I(e){return e&&(!w(e,"p,div")||e.className||m(e,"style")||!t(x(e)))}function F(e,t){var n=a(t,{},e.ownerDocument);for(r(e.attributes,function(e,t){try{m(n,t.name,t.value)}catch(o){}});e.firstChild;)u(n,e.firstChild);return e.parentNode.replaceChild(n,e),n}function B(e){return!!/11?|9/.test(e.nodeType)&&0>"|iframe|area|base|basefont|br|col|frame|hr|img|input|wbr|isindex|link|meta|param|command|embed|keygen|source|track|object|".indexOf("|"+e.nodeName.toLowerCase()+"|")}function z(e,t){var n=(e||{}).nodeType||fe;return 1!==n?n===fe:"code"===(e=e.tagName.toLowerCase())?!t:0>pe.indexOf("|"+e+"|")}function L(e){return e.lastChild&&L(e.lastChild)&&c(e.lastChild),3===e.nodeType?!e.nodeValue:B(e)&&!e.childNodes.length}function P(e){_(e,function(e){var t=!z(e,!0)&&8!==e.nodeType,n=e.parentNode;if(t&&(z(n,!0)||"P"===n.tagName)){for(var o=e;z(o.parentNode,!0)||"P"===o.parentNode.tagName;)o=o.parentNode;for(var r=W(o,e),i=e;n&&z(n,!0);){if(1===n.nodeType){for(var l=n.cloneNode();i.firstChild;)u(l,i.firstChild);u(i,l)}n=n.parentNode}k(i,o),L(r)||k(r,i),L(o)&&c(o)}t&&w(e,"ul,ol")&&w(e.parentNode,"ul,ol")&&(r="li",t=(t=e).previousElementSibling,(t=r&&t&&!w(t,r)?null:t)||k(t=a("li"),e),u(t,e))})}function j(e,t){return e?(t?e.previousSibling:e.nextSibling)||j(e.parentNode,t):null}function U(e){var t,n,o,r,i,a,l=b(e,"whiteSpace"),s=/line$/i.test(l),u=e.firstChild;if(!/pre(\-wrap)?$/i.test(l))for(;u;){if(i=u.nextSibling,t=u.nodeValue,1===(a=u.nodeType)&&u.firstChild&&U(u),a===fe){for(n=j(u),o=j(u,!0),a=!1;C(o,"sceditor-ignore");)o=j(o,!0);if(z(u)&&o){for(r=o;r.lastChild;)for(r=r.lastChild;C(r,"sceditor-ignore");)r=j(r,!0);a=r.nodeType===fe?/[\t\n\r ]$/.test(r.nodeValue):!z(r)}t=t.replace(/\u200B/g,""),o&&z(o)&&!a||(t=t.replace(s?/^[\t ]+/:/^[\t\n\r ]+/,"")),(t=n&&z(n)?t:t.replace(s?/[\t ]+$/:/[\t\n\r ]+$/,"")).length?u.nodeValue=t.replace(s?/[\t ]+/g:/[\t\n\r ]+/g," "):c(u)}u=i}}function W(e,t){var n=e.ownerDocument.createRange();return n.setStartBefore(e),n.setEndAfter(t),n.extractContents()}function q(e){for(var t=0,n=0;e;)t+=e.offsetLeft,n+=e.offsetTop,e=e.offsetParent;return{left:t,top:n}}function V(e,t){var n=e.style;return de[t]||(de[t]=t.replace(/^-ms-/,"ms-").replace(/-(\w)/g,function(e,t){return t.toUpperCase()})),n=n[t=de[t]],"textAlign"===t&&(n=n||b(e,t),b(e.parentNode,t)===n||"block"!==b(e,"display")||w(e,"hr,th"))?"":n}function $(e,t){var n=e.attributes.length;if(n===t.attributes.length){for(;n--;){var o=e.attributes[n];if("style"===o.name?!function(e,t){var n=e.style.length;if(n===t.style.length){for(;n--;){var o=e.style[n];if(e.style[o]!==t.style[o])return}return 1}}(e,t):o.value!==m(t,o.name))return}return 1}}function G(e){for(;e.firstChild;)k(e.firstChild,e);c(e)}function Y(e){return e.replace(/([\-.*+?^=!:${}()|\[\]\/\\])/g,"\\$1")}function K(e,t){if(!e)return e;var n={"&":"&amp;","<":"&lt;",">":"&gt;","  ":"&nbsp; ","\r\n":"<br />","\r":"<br />","\n":"<br />"};return!1!==t&&(n['"']="&#34;",n["'"]="&#39;",n["`"]="&#96;"),e.replace(/ {2}|\r\n|[&<>\r\n'"`]/g,function(e){return n[e]||e})}function X(e,t,n){var o=ge[e];return Object.keys(t).forEach(function(e){o=o.replace(RegExp(Y("{"+e+"}"),"g"),t[e])}),o=n?H(o):o}function Q(e){if("mozHidden"in document)for(var t,n=e.getBody();n;){if((t=n).firstChild)t=t.firstChild;else{for(;t&&!t.nextSibling;)t=t.parentNode;t=t&&t.nextSibling}3===n.nodeType&&/[\n\r\t]+/.test(n.nodeValue)&&(/^pre/.test(b(n.parentNode,"whiteSpace"))||c(n)),n=t}}function Z(e){function t(e){return"signal"+e.charAt(0).toUpperCase()+e.slice(1)}function n(n,o){for(var i,a=t((n=[].slice.call(n)).shift()),l=0;l<r.length;l++)if(a in r[l]&&(i=r[l][a].apply(e,n),o))return i}var o=this,r=[];o.call=function(){n(arguments,!1)},o.callOnlyFirst=function(){return n(arguments,!0)},o.hasHandler=function(e){var n=r.length;for(e=t(e);n--;)if(e in r[n])return!0;return!1},o.exists=function(e){return e in ye&&"function"==typeof(e=ye[e])&&"object"==typeof e.prototype},o.isRegistered=function(e){if(o.exists(e))for(var t=r.length;t--;)if(r[t]instanceof ye[e])return!0;return!1},o.register=function(t){return!(!o.exists(t)||o.isRegistered(t)||(t=new ye[t],r.push(t),"init"in t&&t.init.call(e),0))},o.deregister=function(t){var n,i=r.length,a=!1;if(!o.isRegistered(t))return a;for(;i--;)r[i]instanceof ye[t]&&(a=!0,"destroy"in(n=r.splice(i,1)[0])&&n.destroy.call(e));return a},o.destroy=function(){for(var t=r.length;t--;)"destroy"in r[t]&&r[t].destroy.call(e);r=[],e=null}}function J(e,t,n){var o,i,l=t||e.contentDocument||e.document,s="sceditor-start-marker",d="sceditor-end-marker",f=this;f.insertHTML=function(e,t){var o,r;if(!f.selectedRange())return!1;for(t&&(e+=f.selectedHtml()+t),r=a("p",{},l),o=l.createDocumentFragment(),r.innerHTML=n(e);r.firstChild;)u(o,r.firstChild);f.insertNode(o)},i=function(e,t,n){var r,i=l.createDocumentFragment();if("string"==typeof e?(t&&(e+=f.selectedHtml()+t),i=H(e)):(u(i,e),t&&(u(i,f.selectedRange().extractContents()),u(i,t))),r=i.lastChild){for(;!z(r.lastChild,!0);)r=r.lastChild;return B(r)?r.lastChild||u(r,document.createTextNode("â€‹")):r=i,f.removeMarkers(),u(r,o(s)),u(r,o(d)),n?(u(n=a("div"),i),n.innerHTML):i}},f.insertNode=function(e,t){function n(e){e&&L(e)&&0>s.indexOf(e)&&c(e)}var o,a,l=i(e,t),t=(e=f.selectedRange()).commonAncestorContainer,s=[];return l?(e.startContainer!==e.endContainer&&(r(t.childNodes,function(e,t){L(t)&&s.push(t)}),o=l.firstChild,a=l.lastChild),e.deleteContents(),t&&3!==t.nodeType&&!B(t)?k(l,t):(e.insertNode(l),n(o&&o.previousSibling),n(a&&a.nextSibling)),f.restoreRange(),void 0):!1},f.cloneSelected=function(){var e=f.selectedRange();return e?e.cloneRange():void 0},f.selectedRange=function(){var t,n,o=e.getSelection();if(o){if(o.rangeCount<=0){for(n=l.body;n.firstChild;)n=n.firstChild;(t=l.createRange()).setStartBefore(n),o.addRange(t)}return 0<o.rangeCount?o.getRangeAt(0):t}},f.hasSelection=function(){var t=e.getSelection();return t&&0<t.rangeCount},f.selectedHtml=function(){var e,t=f.selectedRange();return t?(u(e=a("p",{},l),t.cloneContents()),e.innerHTML):""},f.parentNode=function(){var e=f.selectedRange();return e?e.commonAncestorContainer:void 0},f.getFirstBlockParent=function(e){var t=function(e){return z(e,!0)?(e=e?e.parentNode:null)&&t(e):e};return t(e||f.parentNode())},f.insertNodeAt=function(e,t){var n=f.selectedRange(),o=f.cloneSelected();return o?(o.collapse(e),o.insertNode(t),f.selectRange(n),void 0):!1},o=function(e){return f.removeMarker(e),(e=a("span",{id:e,className:"sceditor-selection sceditor-ignore",style:"display:none;line-height:0"},l)).innerHTML=" ",e},f.insertMarkers=function(){var e=f.selectedRange(),t=o(s);f.removeMarkers(),f.insertNodeAt(!0,t),e&&e.collapsed?t.parentNode.insertBefore(o(d),t.nextSibling):f.insertNodeAt(!1,o(d))},f.getMarker=function(e){return l.getElementById(e)},f.removeMarker=function(e){(e=f.getMarker(e))&&c(e)},f.removeMarkers=function(){f.removeMarker(s),f.removeMarker(d)},f.saveRange=function(){f.insertMarkers()},f.selectRange=function(t){var n,o=e.getSelection(),r=t.endContainer;if(t.collapsed&&r&&!z(r,!0)){for(n=r.lastChild;n&&w(n,".sceditor-ignore");)n=n.previousSibling;w(n,"br")&&((r=l.createRange()).setEndAfter(n),r.collapse(!1),f.compare(t,r)&&(t.setStartBefore(n),t.collapse(!0)))}o&&(f.clear(),o.addRange(t))},f.restoreRange=function(){var e,t=f.selectedRange(),n=f.getMarker(s),o=f.getMarker(d);return n&&o&&t?(e=n.nextSibling===o,(t=l.createRange()).setStartBefore(n),t.setEndAfter(o),e&&t.collapse(!0),f.selectRange(t),f.removeMarkers(),void 0):!1},f.selectOuterText=function(e,t){var n=f.cloneSelected();return n?(n.collapse(!1),e=ke(n,!0,e),t=ke(n,!1,t),n.setStart(e.node,e.offset),n.setEnd(t.node,t.offset),f.selectRange(n),void 0):!1},f.getOuterText=function(e,t){var n=f.cloneSelected();return n?(n.collapse(!e),ke(n,e,t).text):""},f.replaceKeyword=function(e,t,n,o,r,i){n||e.sort(function(e,t){return e[0].length-t[0].length});var a,l,s,c,u,d,p,m="(^|[\\sآ â€‚â€ƒâ€‰])",h=e.length,g=r?1:0,o=o||e[h-1][0].length;for(r&&o++,i=i||"",c=(a=f.getOuterText(!0,o)).length,a+=i,t&&(a+=f.getOuterText(!1,o));h--;)if(s=Math.max(0,c-(p=(d=e[h][0]).length)-g),u=-1,r?(l=a.substr(s).match(RegExp(m+Y(d)+m)))&&(u=l.index+s+l[1].length):u=a.indexOf(d,s),u>-1&&c>=u&&u+p+g>=c)return u=c-u,f.selectOuterText(u,p-u-(/^\S/.test(i)?1:0)),f.insertHTML(e[h][1]),!0;return!1},f.compare=function(e,t){return t=t||f.selectedRange(),e&&t?0===e.compareBoundaryPoints(Range.END_TO_END,t)&&0===e.compareBoundaryPoints(Range.START_TO_START,t):!e&&!t},f.clear=function(){var t=e.getSelection();t&&(t.removeAllRanges?t.removeAllRanges():t.empty&&t.empty())}}function ee(e){return function(t){for(var n=arguments.length,o=Array(n>1?n-1:0),r=1;n>r;r++)o[r-1]=arguments[r];return Ie(e,t,o)}}function te(e,t){De&&De(e,null);for(var n=t.length;n--;){var o,r=t[n];"string"!=typeof r||(o=Pe(r))!==r&&(Ne(t)||(t[n]=o),r=o),e[r]=!0}return e}function ne(e){var t=Oe(null),n=void 0;for(n in e)Ie(Ee,e,[n])&&(t[n]=e[n]);return t}function oe(e,t){for(;null!==e;){var n=Me(e,t);if(n){if(n.get)return ee(n.get);if("function"==typeof n.value)return ee(n.value)}e=Ae(e)}return null}function re(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function ie(e,t){function i(e){return wt.sanitize(e,{ADD_TAGS:["iframe"],ADD_ATTR:["allowfullscreen","frameborder","target"]})}var T,L,j,W,V,Q,ee,te,ne,oe,re,ae,ue,de,pe,he,ge,ye,be,xe,we,ke,Te,Ee,De,Ne,Ae,Me,Re,_e,Oe,He,Ie,Fe,Be,ze,Le,Pe,je,Ue,We,qe,Ve,$e,Ge,Ye,Ke,Xe,Qe,Ze,Je,et,tt,nt,ot,rt,it,at,lt,st,ct=this,ut={},dt=[],gt=[],vt={},yt={},bt={};ct.commands=n(!0,{},t.commands||ve);var xt=ct.opts=n(!0,{},me,t);ct.opts.emoticons=t.emoticons||me.emoticons,Array.isArray(xt.allowedIframeUrls)||(xt.allowedIframeUrls=[]),xt.allowedIframeUrls.push("https://www.youtube-nocookie.com/embed/");var wt=ft();wt.addHook("uponSanitizeElement",function(e,t){var n=xt.allowedIframeUrls;if("iframe"===t.tagName){for(var o=m(e,"src")||"",r=0;r<n.length;r++){var i=n[r];if(le(i)&&o.substr(0,i.length)===i||i.test&&i.test(o))return}c(e)}}),wt.addHook("afterSanitizeAttributes",function(e){"target"in e&&m(e,"data-sce-target",m(e,"target")),h(e,"target")}),t=function(){e._sceditor=ct,xt.locale&&"en"!==xt.locale&&Re(),k(L=a("div",{className:"sceditor-container"}),e),b(L,"z-index",xt.zIndex),be=e.required,e.required=!1;var t=ie.formats[xt.format];T=t?new t:{},de=new Z(ct),(xt.plugins||"").split(",").forEach(function(e){de.register(e.trim())}),"init"in T&&T.init.call(ct),Fe(),_e(),Me(),Oe(),He(),Se||ct.toggleSourceMode(),Ke();var n=function(){p(pt,"load",n),xt.autofocus&&et(!!xt.autofocusEnd),st(),Qe(),de.call("ready"),"onReady"in T&&T.onReady.call(ct)};f(pt,"load",n),"complete"===mt.readyState&&n()},Re=function(){var e;(ae=ie.locale[xt.locale])||(e=xt.locale.split("-"),ae=ie.locale[e[0]]),ae&&ae.dateFormat&&(xt.dateFormat=ae.dateFormat)},Me=function(){te=a("textarea"),W=a("iframe",{frameborder:0,allowfullscreen:!0}),xt.startInSourceMode?(S(L,"sourceMode"),g(W)):(S(L,"wysiwygMode"),g(te)),xt.spellcheck||m(L,"spellcheck","false"),"https:"===pt.location.protocol&&m(W,"src","about:blank"),u(L,W),u(L,te),ct.dimensions(xt.width||N(e),xt.height||A(e));var t=Ce?" ios":"";(ee=W.contentDocument).open(),ee.write(X("html",{attrs:' class="'+t+'"',spellcheck:xt.spellcheck?"":'spellcheck="false"',charset:xt.charset,style:xt.style})),ee.close(),Q=ee.body,V=W.contentWindow,ct.readOnly(!!xt.readOnly),Ce&&(A(Q,"100%"),f(Q,"touchend",ct.focus)),t=m(e,"tabindex"),m(te,"tabindex",t),m(W,"tabindex",t),ue=new J(V,null,i),g(e),ct.val(e.value),(t=xt.placeholder||m(e,"placeholder"))&&(te.placeholder=t,m(Q,"placeholder",t))},Oe=function(){xt.autoUpdate&&(f(Q,"blur",lt),f(te,"blur",lt)),null===xt.rtl&&(xt.rtl="rtl"===b(te,"direction")),ct.rtl(!!xt.rtl),xt.autoExpand&&(f(Q,"load",st,!0),f(Q,"input keyup",st)),xt.resizeEnabled&&Ie(),m(L,"id",xt.id),ct.emoticons(xt.emoticonsEnabled)},He=function(){var t=e.form,n="compositionstart compositionend",o="keydown keyup keypress focus blur contextmenu input",r="onselectionchange"in ee?"selectionchange":"keyup focus blur contextmenu mouseup touchend click";f(mt,"click",Ge),t&&(f(t,"reset",We),f(t,"submit",ct.updateOriginal,!0)),f(window,"pagehide",ct.updateOriginal),f(window,"pageshow",We),f(Q,"keypress",Ue),f(Q,"keydown",Pe),f(Q,"keydown",je),f(Q,"keyup",Qe),f(Q,"blur",it),f(Q,"keyup",at),f(Q,"paste",Be),f(Q,"cut copy",ze),f(Q,n,Ve),f(Q,r,Ze),f(Q,o,$e),xt.emoticonsCompat&&pt.getSelection&&f(Q,"keyup",nt),f(Q,"blur",function(){ct.val()||S(Q,"placeholder")}),f(Q,"focus",function(){E(Q,"placeholder")}),f(te,"blur",it),f(te,"keyup",at),f(te,"keydown",Pe),f(te,n,Ve),f(te,o,$e),f(ee,"mousedown",qe),f(ee,r,Ze),f(ee,"keyup",Qe),f(L,"selectionchanged",Je),f(L,"selectionchanged",Ke),f(L,"selectionchanged valuechanged nodechanged pasteraw paste",$e)},_e=function(){var e,t=ct.commands,n=(xt.toolbarExclude||"").split(","),o=xt.toolbar.split("|");j=a("div",{className:"sceditor-toolbar",unselectable:"on"}),xt.icons in ie.icons&&(De=new ie.icons[xt.icons]),r(o,function(o,i){e=a("div",{className:"sceditor-group"}),r(i.split(","),function(o,r){var i,a,l=t[r];!l||-1<n.indexOf(r)||(i=l.shortcut,a=X("toolbarButton",{name:r,dispName:ct._(l.name||l.tooltip||r)},!0).firstChild,De&&De.create&&De.create(r)&&(k(De.create(r),a.firstChild),S(a,"has-icon")),a._sceTxtMode=!!l.txtExec,a._sceWysiwygMode=!!l.exec,D(a,"disabled",!l.exec),f(a,"click",function(e){C(a,"disabled")||Ae(a,l),Ke(),e.preventDefault()}),f(a,"mousedown",function(e){ct.closeDropDown(),e.preventDefault()}),l.tooltip&&m(a,"title",ct._(l.tooltip)+(i?" ("+i+")":"")),i&&ct.addShortcut(i,r),l.state?gt.push({name:r,state:l.state}):le(l.exec)&&gt.push({name:r,state:l.exec}),u(e,a),yt[r]=a)}),e.firstChild&&u(j,e)}),u(xt.toolbarContainer||L,j)},Ie=function(){function e(e){var n=m+((t="touchmove"===e.type?(c=(e=pt.event).changedTouches[0].pageX,e.changedTouches[0].pageY):(c=e.pageX,e.pageY))-s),o=x?d-(c-l):d+(c-l);C>0&&o>C&&(o=C),T>0&&T>o&&(o=T),xt.resizeWidth||(o=!1),k>0&&n>k&&(n=k),w>0&&w>n&&(n=w),xt.resizeHeight||(n=!1),(o||n)&&ct.dimensions(o,n),e.preventDefault()}var t,n=a("div",{className:"sceditor-grip"}),o=a("div",{className:"sceditor-resize-cover"}),r="touchmove mousemove",i="touchcancel touchend mouseup",l=0,s=0,c=0,d=0,m=0,h=N(L),y=A(L),b=!1,x=ct.rtl(),w=xt.resizeMinHeight||y/1.5,k=xt.resizeMaxHeight||2.5*y,T=xt.resizeMinWidth||h/1.25,C=xt.resizeMaxWidth||1.25*h,D=function(t){b&&(b=!1,g(o),E(L,"resizing"),p(mt,r,e),p(mt,i,D),t.preventDefault())};De&&De.create&&(h=De.create("grip"))&&(u(n,h),S(n,"has-icon")),u(L,n),u(L,o),g(o),f(n,"touchstart mousedown",function(t){s="touchstart"===t.type?(l=(t=pt.event).touches[0].pageX,t.touches[0].pageY):(l=t.pageX,t.pageY),d=N(L),m=A(L),b=!0,S(L,"resizing"),v(o),f(mt,r,e),f(mt,i,D),t.preventDefault()})},Fe=function(){var e=xt.emoticons,t=xt.emoticonsRoot||"";r(bt=e?n({},e.more,e.dropdown,e.hidden):bt,function(e,n){bt[e]=X("emoticon",{key:e,url:t+(n.url||n),tooltip:n.tooltip||e}),xt.emoticonsEnabled&&dt.push(a("img",{src:t+(n.url||n)}))})},et=function(e){var t,n=Q.firstChild;if(R(L)){if(ct.sourceMode())return t=e?te.value.length:0,void te.setSelectionRange(t,t);if(U(Q),e)for((n=Q.lastChild)||(n=a("p",{},ee),u(Q,n));n.lastChild;)w(n=n.lastChild,"br")&&n.previousSibling&&(n=n.previousSibling);t=ee.createRange(),B(n)?t.selectNodeContents(n):(t.setStartBefore(n),e&&t.setStartAfter(n)),t.collapse(!e),ue.selectRange(t),ge=t,e&&(Q.scrollTop=Q.scrollHeight),ct.focus()}},ct.readOnly=function(e){return"boolean"!=typeof e?!te.readonly:(Q.contentEditable=!e,te.readonly=!e,Ye(e),ct)},ct.rtl=function(e){var t=e?"rtl":"ltr";return"boolean"!=typeof e?"rtl"===m(te,"dir"):(m(Q,"dir",t),m(te,"dir",t),E(L,"rtl"),E(L,"ltr"),S(L,t),De&&De.rtl&&De.rtl(e),ct)},Ye=function(e){var t=ct.inSourceMode()?"_sceTxtMode":"_sceWysiwygMode";r(yt,function(n,o){D(o,"disabled",e||!o[t])})},ct.width=function(e,t){return e||0===e?(ct.dimensions(e,null,t),ct):N(L)},ct.dimensions=function(e,t,n){return t=!(!t&&0!==t)&&t,!1===(e=!(!e&&0!==e)&&e)&&!1===t?{width:ct.width(),height:ct.height()}:(!1!==e&&(!1!==n&&(xt.width=e),N(L,e)),!1!==t&&(!1!==n&&(xt.height=t),A(L,t)),ct)},ct.height=function(e,t){return e||0===e?(ct.dimensions(null,e,t),ct):A(L)},ct.maximize=function(e){var t="sceditor-maximize";return se(e)?C(L,t):((e=!!e)&&(Te=pt.pageYOffset),D(mt.documentElement,t,e),D(mt.body,t,e),D(L,t,e),ct.width(e?"100%":xt.width,!1),ct.height(e?"100%":xt.height,!1),e||pt.scrollTo(0,Te),st(),ct)},st=function(){xt.autoExpand&&!ke&&(ke=setTimeout(ct.expandToContent,200))},ct.expandToContent=function(t){var n,o;ct.maximize()||(clearTimeout(ke),ke=!1,we||(we={min:n=xt.resizeMinHeight||xt.height||A(e),max:xt.resizeMaxHeight||2*n}),(o=mt.createRange()).selectNodeContents(Q),n=o.getBoundingClientRect(),o=ee.documentElement.clientHeight-1,n=n.bottom-n.top,o=ct.height()+1+(n-o),t||-1===we.max||(o=Math.min(o,we.max)),ct.height(Math.ceil(Math.max(o,we.min))))},ct.destroy=function(){var t;de&&(de.destroy(),de=ue=null,ne&&c(ne),p(mt,"click",Ge),(t=e.form)&&(p(t,"reset",We),p(t,"submit",ct.updateOriginal,!0)),p(window,"pagehide",ct.updateOriginal),p(window,"pageshow",We),c(te),c(j),c(L),delete e._sceditor,v(e),e.required=be)},ct.createDropDown=function(e,t,o){t="sceditor-"+t,ct.closeDropDown(),ne&&C(ne,t)||(e=n({top:e.offsetTop,left:e.offsetLeft,marginTop:e.clientHeight},xt.dropDownCss),b(ne=a("div",{className:"sceditor-dropdown "+t}),e),u(ne,o),u(L,ne),f(ne,"click focusin",function(e){e.stopPropagation()}),!ne||(o=d(ne,"input,textarea")[0])&&o.focus())},Ge=function(e){3!==e.which&&ne&&!e.defaultPrevented&&(lt(),ct.closeDropDown())},ze=function(e){var t=ue.selectedRange();if(t){for(var n,o,i=a("div",{},ee),l=t.commonAncestorContainer;l&&z(l,!0);)1===l.nodeType&&(o=l.cloneNode(),i.firstChild&&u(o,i.firstChild),u(i,o),n=n||o),l=l.parentNode;u(n||i,t.cloneContents()),U(i),e.clipboardData.setData("text/html",i.innerHTML),r(d(i,"p"),function(e,t){F(t,"div")}),r(d(i,"br"),function(e,t){t.nextSibling&&z(t.nextSibling,!0)||c(t)}),u(Q,i),e.clipboardData.setData("text/plain",i.innerText),c(i),"cut"===e.type&&t.deleteContents(),e.preventDefault()}},Be=function(e){var t,n,o=Q,r=e.clipboardData;if(r){var a={},l=r.types,s=r.items;e.preventDefault();for(var c=0;c<l.length;c++){if(0>l.indexOf("text/html")&&pt.FileReader&&s&&ht.test(s[c].type))return t=r.items[c].getAsFile(),n=void 0,(n=new FileReader).onload=function(e){Le({html:'<img src="'+e.target.result+'" />'})},void n.readAsDataURL(t);a[l[c]]=r.getData(l[c])}a.text=a["text/plain"],a.html=i(a["text/html"]),Le(a)}else if(!Ee){var d=o.scrollTop;for(ue.saveRange(),Ee=mt.createDocumentFragment();o.firstChild;)u(Ee,o.firstChild);setTimeout(function(){var e=o.innerHTML;o.innerHTML="",u(o,Ee),o.scrollTop=d,Ee=!1,ue.restoreRange(),Le({html:i(e)})},0)}},Le=function(e){var t=a("div",{},ee);de.call("pasteRaw",e),M(L,"pasteraw",e),e.html?(t.innerHTML=i(e.html),P(t)):t.innerHTML=K(e.text||""),e={val:t.innerHTML},"fragmentToSource"in T&&(e.val=T.fragmentToSource(e.val,ee,pe)),de.call("paste",e),M(L,"paste",e),"fragmentToHtml"in T&&(e.val=T.fragmentToHtml(e.val,pe)),de.call("pasteHtml",e),t=ue.getFirstBlockParent(),ct.wysiwygEditorInsertHtml(e.val,null,!0),function n(e){if(1===e.nodeType){for(var t=e.parentNode,o=e.tagName,r=e.childNodes.length;r--;)n(e.childNodes[r]);if(z(e)){for(r=e.style.length;r--;){var i=e.style[r];b(t,i)===b(e,i)&&e.style.removeProperty(i)}if(!e.style.length)if(h(e,"style"),"FONT"===o&&(b(e,"fontFamily").toLowerCase()===b(t,"fontFamily").toLowerCase()&&h(e,"face"),b(e,"color")===b(t,"color")&&h(e,"color"),b(e,"fontSize")===b(t,"fontSize")&&h(e,"size")),!e.attributes.length&&/SPAN|FONT/.test(o))G(e);else if(/B|STRONG|EM|SPAN|FONT/.test(o))for(var a=/B|STRONG/.test(o),l="EM"===o;t&&z(t)&&(!a||/bold|700/i.test(b(t,"fontWeight")))&&(!l||"italic"===b(t,"fontStyle"));){if((t.tagName===o||a&&/B|STRONG/.test(t.tagName))&&$(t,e)){G(e);break}t=t.parentNode}var s=e.nextSibling;s&&s.tagName===o&&$(s,e)&&(u(e,s),G(s))}}}(t)},ct.closeDropDown=function(e){ne&&(c(ne),ne=null),!0===e&&ct.focus()},ct.wysiwygEditorInsertHtml=function(e,t,n){var o=A(W);ct.focus(),!n&&s(he,"code")||(ue.insertHTML(e,t),ue.saveRange(),Ne(),P(Q),v(n=d(Q,"#sceditor-end-marker")[0]),e=Q.scrollTop,t=q(n).top+1.5*n.offsetHeight-o,g(n),(t>e||e>t+o)&&(Q.scrollTop=t),rt(!1),ue.restoreRange(),Qe())},ct.wysiwygEditorInsertText=function(e,t){ct.wysiwygEditorInsertHtml(K(e),K(t))},ct.insertText=function(e,t){return ct.inSourceMode()?ct.sourceEditorInsertText(e,t):ct.wysiwygEditorInsertText(e,t),ct},ct.sourceEditorInsertText=function(e,t){var n,o=te.selectionStart,r=te.selectionEnd,i=te.scrollTop;te.focus(),n=te.value,t&&(e+=n.substring(o,r)+t),te.value=n.substring(0,o)+e+n.substring(r,n.length),te.selectionStart=o+e.length-(t?t.length:0),te.selectionEnd=te.selectionStart,te.scrollTop=i,te.focus(),rt()},ct.getRangeHelper=function(){return ue},ct.sourceEditorCaret=function(e){return te.focus(),e?(te.selectionStart=e.start,te.selectionEnd=e.end,this):{start:te.selectionStart,end:te.selectionEnd}},ct.val=function(e,t){return le(e)?(ct.inSourceMode()?ct.setSourceEditorValue(e):(!1!==t&&"toHtml"in T&&(e=T.toHtml(e)),ct.setWysiwygEditorValue(e)),ct):ct.inSourceMode()?ct.getSourceEditorValue(!1):ct.getWysiwygEditorValue(t)},ct.insert=function(e,t,n,o,r){var i;return ct.inSourceMode()?ct.sourceEditorInsertText(e,t):(t&&(i=ue.selectedHtml(),e+=(i=!1!==n&&"fragmentToSource"in T?T.fragmentToSource(i,ee,pe):i)+t),!1!==n&&"fragmentToHtml"in T&&(e=T.fragmentToHtml(e,pe)),!1!==n&&!0===r&&(e=e.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")),ct.wysiwygEditorInsertHtml(e)),ct},ct.getWysiwygEditorValue=function(e){for(var t,n=a("div",{},ee),o=Q.childNodes,r=0;r<o.length;r++)u(n,o[r].cloneNode(!0));return u(Q,n),P(n),c(n),t=n.innerHTML,!1!==e&&T.hasOwnProperty("toSource")?T.toSource(t,ee):t},ct.getBody=function(){return Q},ct.getContentAreaContainer=function(){return W},ct.getSourceEditorValue=function(e){var t=te.value;return!1!==e&&"toHtml"in T?T.toHtml(t):t},ct.setWysiwygEditorValue=function(e){e=e||"<p><br /></p>",Q.innerHTML=i(e),Ne(),Qe(),rt(),st()},ct.setSourceEditorValue=function(e){te.value=e,rt()},ct.updateOriginal=function(){e.value=ct.val()},Ne=function(){var e,t,n,o,i,a,s;xt.emoticonsEnabled&&(e=Q,t=bt,n=xt.emoticonsCompat,o=e.ownerDocument,i="(^|\\s|آ |â€‚|â€ƒ|â€‰|$)",a=[],s={},l(e,"code")||(r(t,function(e){s[e]=RegExp(i+Y(e)+i),a.push(e)}),a.sort(function(e,t){return t.length-e.length}),function c(e){for(e=e.firstChild;e;){if(1!==e.nodeType||w(e,"code")||c(e),e.nodeType===fe)for(var r=0;r<a.length;r++){var i,l=e.nodeValue,u=a[r],d=n?l.search(s[u]):l.indexOf(u);d>-1&&(i=l.indexOf(u,d),d=H(t[u],o),u=l.substr(i+u.length),d.appendChild(o.createTextNode(u)),e.nodeValue=l.substr(0,i),e.parentNode.insertBefore(d,e.nextSibling))}e=e.nextSibling}}(e)))},ct.inSourceMode=function(){return C(L,"sourceMode")},ct.sourceMode=function(e){var t=ct.inSourceMode();return"boolean"!=typeof e?t:((t&&!e||!t&&e)&&ct.toggleSourceMode(),ct)},ct.toggleSourceMode=function(){var e=ct.inSourceMode();!Se&&e||(e||(ue.saveRange(),ue.clear()),ge=null,ct.blur(),e?ct.setWysiwygEditorValue(ct.getSourceEditorValue()):ct.setSourceEditorValue(ct.getWysiwygEditorValue()),y(te),y(W),D(L,"wysiwygMode",e),D(L,"sourceMode",!e),Ye(),Ke())},Xe=function(){return te.focus(),te.value.substring(te.selectionStart,te.selectionEnd)},Ae=function(e,t){ct.inSourceMode()?t.txtExec&&(Array.isArray(t.txtExec)?ct.sourceEditorInsertText.apply(ct,t.txtExec):t.txtExec.call(ct,e,Xe())):t.exec&&(ce(t.exec)?t.exec.call(ct,e):ct.execCommand(t.exec,t.hasOwnProperty("execParam")?t.execParam:null))},ct.execCommand=function(e,t){var n=!1,o=ct.commands[e];if(ct.focus(),!s(ue.parentNode(),"code")){try{n=ee.execCommand(e,!1,t)}catch(r){}!n&&o&&o.errorMessage&&alert(ct._(o.errorMessage)),Ke()}},Ze=function(){function e(){if(V.getSelection()&&V.getSelection().rangeCount<=0)ge=null;else if(ue&&!ue.compare(ge)){if((ge=ue.cloneSelected())&&ge.collapsed){var e,t,n=ge.startContainer,o=ge.startOffset;for(o&&n.nodeType!==fe&&(n=n.childNodes[o]);n&&n.parentNode!==Q;)n=n.parentNode;n&&z(n,!0)&&(ue.saveRange(),e=ee,_(Q,function(n){z(n,!0)?(t||n.nodeType===fe?/\S/.test(n.nodeValue):!w(n,".sceditor-ignore"))&&(t||k(t=a("p",{},e),n),u(t,n)):t=null},!1,!0),ue.restoreRange())}M(L,"selectionchanged")}ye=!1}ye||(ye=!0,"onselectionchange"in ee?e():setTimeout(e,100))},Je=function(){var e,t=ue.parentNode();pe!==t&&(e=pe,pe=t,he=ue.getFirstBlockParent(t),M(L,"nodechanged",{oldNode:e,newNode:pe}))},ct.currentNode=function(){return pe},ct.currentBlockNode=function(){return he},Ke=function(){var e,t,n="active",o=ee,i=ct.sourceMode();if(ct.readOnly())r(d(j,n),function(e,t){E(t,n)});else{i||(t=ue.parentNode(),e=ue.getFirstBlockParent(t));for(var a=0;a<gt.length;a++){var l=0,s=yt[gt[a].name],c=gt[a].state,u=i&&!s._sceTxtMode||!i&&!s._sceWysiwygMode;if(le(c)){if(!i)try{-1<(l=o.queryCommandEnabled(c)?0:-1)&&(l=o.queryCommandState(c)?1:0)}catch(f){}}else u||(l=c.call(ct,t,e));D(s,"disabled",u||0>l),D(s,n,l>0)}De&&De.update&&De.update(i,t,e)}},Ue=function(e){var t,n,o;e.defaultPrevented||(ct.closeDropDown(),13!==e.which||!w(he,"li,ul,ol")&&I(he)&&(t=a("br",{},ee),ue.insertNode(t),(o=(n=t.parentNode).lastChild)&&o.nodeType===fe&&""===o.nodeValue&&(c(o),o=n.lastChild),!z(n,!0)&&o===t&&z(t.previousSibling)&&ue.insertHTML("<br>"),e.preventDefault()))},Qe=function(){O(Q,function(e){if(1===e.nodeType&&!/inline/.test(b(e,"display"))&&!w(e,".sceditor-nlf")&&I(e)){var t=a("p",{},ee);return t.className="sceditor-nlf",t.innerHTML="<br />",u(Q,t),!1}return 3===e.nodeType&&!/^\s*$/.test(e.nodeValue)||w(e,"br")?!1:void 0})},We=function(){ct.val(e.value)},qe=function(){ct.closeDropDown()},ct._=function(){var e=arguments;return ae&&ae[e[0]]&&(e[0]=ae[e[0]]),e[0].replace(/\{(\d+)\}/g,function(t,n){return void 0!==e[+n+1]?e[+n+1]:"{"+n+"}"})},$e=function(e){de&&de.call(e.type+"Event",e,ct);var t=(e.target===te?"scesrc":"scewys")+e.type;ut[t]&&ut[t].forEach(function(t){t.call(ct,e)})},ct.bind=function(e,t,n,o){for(var r,i,a=(e=e.split(" ")).length;a--;)ce(t)&&(r="scewys"+e[a],i="scesrc"+e[a],n||(ut[r]=ut[r]||[],ut[r].push(t)),o||(ut[i]=ut[i]||[],ut[i].push(t)),"valuechanged"===e[a]&&(rt.hasHandler=!0));return ct},ct.unbind=function(e,t,n,r){for(var i=(e=e.split(" ")).length;i--;)ce(t)&&(n||o(ut["scewys"+e[i]]||[],t),r||o(ut["scesrc"+e[i]]||[],t));return ct},ct.blur=function(e,t,n){return ce(e)?ct.bind("blur",e,t,n):(ct.sourceMode()?te:Q).blur(),ct},ct.focus=function(e,t,n){if(ce(e))ct.bind("focus",e,t,n);else if(ct.inSourceMode())te.focus();else{if(d(ee,":focus").length)return;var o,n=ue.selectedRange();ge||et(!0),n&&1===n.endOffset&&n.collapsed&&(o=n.endContainer)&&1===o.childNodes.length&&w(o.firstChild,"br")&&(n.setStartBefore(o.firstChild),n.collapse(!0),ue.selectRange(n)),V.focus(),Q.focus()}return Ke(),ct},ct.keyDown=function(e,t,n){return ct.bind("keydown",e,t,n)},ct.keyPress=function(e,t,n){return ct.bind("keypress",e,t,n)},ct.keyUp=function(e,t,n){return ct.bind("keyup",e,t,n)},ct.nodeChanged=function(e){return ct.bind("nodechanged",e,!1,!0)},ct.selectionChanged=function(e){return ct.bind("selectionchanged",e,!1,!0)},ct.valueChanged=function(e,t,n){return ct.bind("valuechanged",e,t,n)},tt=function(e){var t=0,n=ct.emoticonsCache,o=String.fromCharCode(e.which);s(he,"code")||(n||(n=[],r(bt,function(e,o){n[t++]=[e,o]}),n.sort(function(e,t){return e[0].length-t[0].length}),ct.emoticonsCache=n,ct.longestEmoticonCode=n[n.length-1][0].length),ue.replaceKeyword(ct.emoticonsCache,!0,!0,ct.longestEmoticonCode,xt.emoticonsCompat,o)&&(xt.emoticonsCompat&&/^\s$/.test(o)||e.preventDefault()))},nt=function(){!function(e,t){var n=/[^\s\xA0\u2002\u2003\u2009]+/,o=e&&d(e,"img[data-sceditor-emoticon]");if(e&&o.length)for(var r=0;r<o.length;r++){var i,a,l,s,u=o[r],f=u.parentNode,p=u.previousSibling,m=u.nextSibling;(p&&n.test(p.nodeValue.slice(-1))||m&&n.test((m.nodeValue||"")[0]))&&(a=-1,l=(i=t.cloneSelected()).startContainer,s=p.nodeValue||"",s+=x(u,"sceditor-emoticon"),l===m&&(a=s.length+i.startOffset),l===e&&e.childNodes[i.startOffset]===m&&(a=s.length),l===p&&(a=i.startOffset),(m=m&&m.nodeType===fe?m:f.insertBefore(f.ownerDocument.createTextNode(""),m)).insertData(0,s),c(p),c(u),a>-1&&(i.setStart(m,a),i.collapse(!0),t.selectRange(i)))}}(he,ue)},ct.emoticons=function(e){return e||!1===e?((xt.emoticonsEnabled=e)?(f(Q,"keypress",tt),ct.sourceMode()||(ue.saveRange(),Ne(),rt(!1),ue.restoreRange())):(r(d(Q,"img[data-sceditor-emoticon]"),function(e,t){
var n=x(t,"sceditor-emoticon"),n=ee.createTextNode(n);t.parentNode.replaceChild(n,t)}),p(Q,"keypress",tt),rt()),ct):xt.emoticonsEnabled},ct.css=function(e){return xe||(xe=a("style",{id:"inline"},ee),u(ee.head,xe)),le(e)?(xe.styleSheet?xe.styleSheet.cssText=e:xe.innerHTML=e,ct):xe.styleSheet?xe.styleSheet.cssText:xe.innerHTML},Pe=function(e){var t=[],n={"`":"~",1:"!",2:"@",3:"#",4:"$",5:"%",6:"^",7:"&",8:"*",9:"(",0:")","-":"_","=":"+",";":": ","'":'"',",":"<",".":">","/":"?","\\":"|","[":"{","]":"}"},o={109:"-",110:"del",111:"/",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9"},r=e.which,i={8:"backspace",9:"tab",13:"enter",19:"pause",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"insert",46:"del",91:"win",92:"win",93:"select",96:"0",97:"1",98:"2",99:"3",100:"4",101:"5",102:"6",103:"7",104:"8",105:"9",106:"*",107:"+",109:"-",110:".",111:"/",112:"f1",113:"f2",114:"f3",115:"f4",116:"f5",117:"f6",118:"f7",119:"f8",120:"f9",121:"f10",122:"f11",123:"f12",144:"numlock",145:"scrolllock",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}[r]||String.fromCharCode(r).toLowerCase();(e.ctrlKey||e.metaKey)&&t.push("ctrl"),e.altKey&&t.push("alt"),e.shiftKey&&(t.push("shift"),o[r]?i=o[r]:n[i]&&(i=n[i])),i&&(16>r||r>18)&&t.push(i),vt[t=t.join("+")]&&!1===vt[t].call(ct)&&(e.stopPropagation(),e.preventDefault())},ct.addShortcut=function(e,t){return e=e.toLowerCase(),le(t)?vt[e]=function(){return Ae(yt[t],ct.commands[t]),!1}:vt[e]=t,ct},ct.removeShortcut=function(e){return delete vt[e.toLowerCase()],ct},je=function(e){var t,n,o;if(!xt.disableBlockRemove&&8===e.which&&(n=ue.selectedRange())&&(t=n.startContainer,0===n.startOffset&&(o=ot())&&!w(o,"body"))){for(;t!==o;){for(;t.previousSibling;)if((t=t.previousSibling).nodeType!==fe||t.nodeValue)return;if(!(t=t.parentNode))return}ct.clearBlockFormatting(o),e.preventDefault()}},ot=function(){for(var e=he;!I(e)||z(e,!0);)if(!(e=e.parentNode)||w(e,"body"))return;return e},ct.clearBlockFormatting=function(e){return!(e=e||ot())||w(e,"body")||(ue.saveRange(),e.className="",m(e,"style",""),w(e,"p,div,td")||F(e,"p"),ue.restoreRange()),ct},rt=function(e){var t,n,o;de&&(de.hasHandler("valuechangedEvent")||rt.hasHandler)&&(o=!(n=ct.sourceMode())&&ue.hasSelection(),e=(oe=!1)!==e&&!ee.getElementById("sceditor-start-marker"),re&&(clearTimeout(re),re=!1),o&&e&&ue.saveRange(),(t=n?te.value:Q.innerHTML)!==rt.lastVal&&(rt.lastVal=t,M(L,"valuechanged",{rawValue:n?ct.val():t})),o&&e&&ue.removeMarkers())},it=function(){re&&rt()},at=function(e){var t=e.which,e=13===(n=at.lastChar)||32===n,n=8===n||46===n;at.lastChar=t,oe||(13===t||32===t?e?at.triggerNext=!0:rt():8===t||46===t?n?at.triggerNext=!0:rt():at.triggerNext&&(rt(),at.triggerNext=!1),clearTimeout(re),re=setTimeout(function(){oe||rt()},1500))},Ve=function(e){(oe=/start/i.test(e.type))||rt()},lt=function(){ct.updateOriginal()},t()}var ae=(He=jQuery)&&"object"==typeof He&&"default"in He?He:{"default":He},le=e.bind(null,"string"),se=e.bind(null,"undefined"),ce=e.bind(null,"function"),ue=e.bind(null,"number"),de={},fe=3,pe="|body|hr|p|div|h1|h2|h3|h4|h5|h6|address|pre|form|table|tbody|thead|tfoot|th|tr|td|li|ol|ul|blockquote|center|details|section|article|aside|nav|main|header|hgroup|footer|fieldset|dl|dt|dd|figure|figcaption|",me={toolbar:"bold,italic,underline,strike,subscript,superscript|left,center,right,justify|font,size,color,removeformat|cut,copy,pastetext|bulletlist,orderedlist,indent,outdent|table|code,quote|horizontalrule,image,email,link,unlink|emoticon,youtube,date,time|ltr,rtl|print,maximize,source",toolbarExclude:null,style:"jquery.sceditor.default.css",fonts:"Arial,Arial Black,Comic Sans MS,Courier New,Georgia,Impact,Sans-serif,Serif,Times New Roman,Trebuchet MS,Verdana",colors:"#000000,#44B8FF,#1E92F7,#0074D9,#005DC2,#00369B,#b3d5f4|#444444,#C3FFFF,#9DF9FF,#7FDBFF,#68C4E8,#419DC1,#d9f4ff|#666666,#72FF84,#4CEA5E,#2ECC40,#17B529,#008E02,#c0f0c6|#888888,#FFFF44,#FFFA1E,#FFDC00,#E8C500,#C19E00,#fff5b3|#aaaaaa,#FFC95F,#FFA339,#FF851B,#E86E04,#C14700,#ffdbbb|#cccccc,#FF857A,#FF5F54,#FF4136,#E82A1F,#C10300,#ffc6c3|#eeeeee,#FF56FF,#FF30DC,#F012BE,#D900A7,#B20080,#fbb8ec|#ffffff,#F551FF,#CF2BE7,#B10DC9,#9A00B2,#9A00B2,#e8b6ef",locale:m(document.documentElement,"lang")||"en",charset:"UTF-8",emoticonsCompat:!1,emoticonsEnabled:!0,emoticonsRoot:"",emoticons:{dropdown:{":)":"emoticons/smile.png",":angel:":"emoticons/angel.png",":angry:":"emoticons/angry.png","8-)":"emoticons/cool.png",":'(":"emoticons/cwy.png",":ermm:":"emoticons/ermm.png",":D":"emoticons/grin.png","<3":"emoticons/heart.png",":(":"emoticons/sad.png",":O":"emoticons/shocked.png",":P":"emoticons/tongue.png",";)":"emoticons/wink.png"},more:{":alien:":"emoticons/alien.png",":blink:":"emoticons/blink.png",":blush:":"emoticons/blush.png",":cheerful:":"emoticons/cheerful.png",":devil:":"emoticons/devil.png",":dizzy:":"emoticons/dizzy.png",":getlost:":"emoticons/getlost.png",":happy:":"emoticons/happy.png",":kissing:":"emoticons/kissing.png",":ninja:":"emoticons/ninja.png",":pinch:":"emoticons/pinch.png",":pouty:":"emoticons/pouty.png",":sick:":"emoticons/sick.png",":sideways:":"emoticons/sideways.png",":silly:":"emoticons/silly.png",":sleeping:":"emoticons/sleeping.png",":unsure:":"emoticons/unsure.png",":woot:":"emoticons/w00t.png",":wassat:":"emoticons/wassat.png"},hidden:{":whistling:":"emoticons/whistling.png",":love:":"emoticons/wub.png"}},width:null,height:null,resizeEnabled:!0,resizeMinWidth:null,resizeMinHeight:null,resizeMaxHeight:null,resizeMaxWidth:null,resizeHeight:!0,resizeWidth:!0,dateFormat:"year-month-day",toolbarContainer:null,enablePasteFiltering:!1,disablePasting:!1,readOnly:!1,rtl:!1,autofocus:!1,autofocusEnd:!0,autoExpand:!1,autoUpdate:!1,spellcheck:!0,runWithoutWysiwygSupport:!1,startInSourceMode:!1,id:null,plugins:"",zIndex:null,bbcodeTrim:!1,disableBlockRemove:!1,allowedIframeUrls:[],parserOptions:{},dropDownCss:{}},he=/^(https?|s?ftp|mailto|spotify|skype|ssh|teamspeak|tel):|(\/\/)|data:image\/(png|bmp|gif|p?jpe?g);/i,ge={html:'<!DOCTYPE html><html{attrs}><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8" /><link rel="stylesheet" type="text/css" href="{style}" /><link rel="stylesheet" href="look/fonts/font-awesome.min.css" /><link rel="stylesheet" href="look/fonts/fonts.css" /></head><body contenteditable="true"><p></p></body></html>',toolbarButton:'<a class="sceditor-button sceditor-button-{name}" data-sceditor-command="{name}" unselectable="on"><div unselectable="on">{dispName}</div></a>',emoticon:'<img src="{url}" data-sceditor-emoticon="{key}" alt="{key}" title="{tooltip}" />',fontOpt:'<a class="sceditor-font-option" href="#" data-font="{font}"><font face="{font}">{font}</font></a>',sizeOpt:'<a class="sceditor-fontsize-option" data-size="{size}" href="#"><font size="{size}">{size}</font></a>',pastetext:'<div><label for="txt">{label}</label> <textarea cols="20" rows="7" id="txt"></textarea></div><div><input type="button" class="button" value="{insert}" /></div>',table:'<div><label for="rows">{rows}</label><input type="text" id="rows" value="2" /></div><div><label for="cols">{cols}</label><input type="text" id="cols" value="2" /></div><div><input type="button" class="button" value="{insert}" /></div>',image:'<div><label for="image">{url}</label> <input type="text" id="image" dir="ltr" placeholder="https://" /></div><div><label for="width">{width}</label> <input type="text" id="width" size="2" dir="ltr" /></div><div><label for="height">{height}</label> <input type="text" id="height" size="2" dir="ltr" /></div><div><input type="button" class="button" value="{insert}" /></div>',email:'<div><label for="email">{label}</label> <input type="text" id="email" dir="ltr" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{insert}" /></div>',link:'<div><label for="link">{url}</label> <input type="text" id="link" dir="ltr" placeholder="https://" /></div><div><label for="des">{desc}</label> <input type="text" id="des" /></div><div><input type="button" class="button" value="{ins}" /></div>',youtubeMenu:'<div><label for="link">{label}</label> <input type="text" id="link" dir="ltr" placeholder="https://" /></div><div><input type="button" class="button" value="{insert}" /></div>',youtube:'<iframe width="560" height="315" frameborder="0" allowfullscreen src="https://www.youtube-nocookie.com/embed/{id}?wmode=opaque&start={time}" data-youtube-id="{id}"></iframe>'},ve={bold:{exec:"bold",tooltip:"Bold",shortcut:"Ctrl+B"},italic:{exec:"italic",tooltip:"Italic",shortcut:"Ctrl+I"},underline:{exec:"underline",tooltip:"Underline",shortcut:"Ctrl+U"},strike:{exec:"strikethrough",tooltip:"Strikethrough"},subscript:{exec:"subscript",tooltip:"Subscript"},superscript:{exec:"superscript",tooltip:"Superscript"},left:{state:function(e){if(e=e&&3===e.nodeType?e.parentNode:e){var t="ltr"===b(e,"direction"),e=b(e,"textAlign");return/left/.test(e)||e===(t?"start":"end")}},exec:function(){this.wysiwygEditorInsertHtml("<div align='left'>","</div>")},tooltip:"Align left"},center:{exec:function(){this.wysiwygEditorInsertHtml("<div align='center'>","</div>")},tooltip:"Center"},right:{state:function(e){if(e=e&&3===e.nodeType?e.parentNode:e){var t="ltr"===b(e,"direction"),e=b(e,"textAlign");return/right/.test(e)||e===(t?"end":"start")}},exec:function(){this.wysiwygEditorInsertHtml("<div align='right'>","</div>")},tooltip:"Align right"},justify:{exec:function(){this.wysiwygEditorInsertHtml("<div align='justify'>","</div>")},tooltip:"Justify"},font:{_dropDown:function(e,t,n){var o=a("div");f(o,"click","a",function(t){n(x(this,"font")),e.closeDropDown(!0),t.preventDefault()}),e.opts.fonts.split(",").forEach(function(e){u(o,X("fontOpt",{font:e},!0))}),e.createDropDown(t,"font-picker",o)},exec:function(e){var t=this;ve.font._dropDown(t,e,function(e){t.wysiwygEditorInsertHtml("<div style='font-family: "+e+";'>","</div>")})},tooltip:"Font Name"},size:{_dropDown:function(e,t,n){var o=a("div");f(o,"click","a",function(t){n(x(this,"size")),e.closeDropDown(!0),t.preventDefault()});for(var r=1;7>=r;r++)u(o,X("sizeOpt",{size:r},!0));e.createDropDown(t,"fontsize-picker",o)},exec:function(e){var t=this;ve.size._dropDown(t,e,function(e){t.execCommand("fontsize",e)})},tooltip:"Font Size"},color:{_dropDown:function(e,t,n){var o=a("div"),r="",i=ve.color;i._htmlCache||(e.opts.colors.split("|").forEach(function(e){r+='<div class="sceditor-color-column">',e.split(",").forEach(function(e){r+='<a href="#" class="sceditor-color-option" style="background-color: '+e+'" data-color="'+e+'"></a>'}),r+="</div>"}),i._htmlCache=r),u(o,H(i._htmlCache)),f(o,"click","a",function(t){n(x(this,"color")),e.closeDropDown(!0),t.preventDefault()}),e.createDropDown(t,"color-picker",o)},exec:function(e){var t=this;ve.color._dropDown(t,e,function(e){t.execCommand("forecolor",e)})},tooltip:"Font Color"},removeformat:{exec:"removeformat",tooltip:"Remove Formatting"},cut:{exec:"cut",tooltip:"Cut",errorMessage:"Your browser does not allow the cut command. Please use the keyboard shortcut Ctrl/Cmd-X"},copy:{exec:"copy",tooltip:"Copy",errorMessage:"Your browser does not allow the copy command. Please use the keyboard shortcut Ctrl/Cmd-C"},paste:{exec:"paste",tooltip:"Paste",errorMessage:"Your browser does not allow the paste command. Please use the keyboard shortcut Ctrl/Cmd-V"},pastetext:{exec:function(e){var t,n=a("div"),o=this;u(n,X("pastetext",{label:o._("Paste your text inside the following box:"),insert:o._("Insert")},!0)),f(n,"click",".button",function(e){(t=d(n,"#txt")[0].value)&&o.wysiwygEditorInsertText(t),o.closeDropDown(!0),e.preventDefault()}),o.createDropDown(e,"pastetext",n)},tooltip:"Paste Text"},bulletlist:{exec:function(){Q(this),this.execCommand("insertunorderedlist")},tooltip:"Bullet list"},orderedlist:{exec:function(){Q(this),this.execCommand("insertorderedlist")},tooltip:"Numbered list"},indent:{state:function(e,t){var n;return w(t,"li")||w(t,"ul,ol,menu")&&(t=(n=this.getRangeHelper().selectedRange()).startContainer.parentNode,n=n.endContainer.parentNode,t!==t.parentNode.firstElementChild||w(n,"li")&&n!==n.parentNode.lastElementChild)?0:-1},exec:function(){var e=this.getRangeHelper().getFirstBlockParent();this.focus(),s(e,"ul,ol,menu")&&this.execCommand("indent")},tooltip:"Add indent"},outdent:{state:function(e,t){return s(t,"ul,ol,menu")?0:-1},exec:function(){s(this.getRangeHelper().getFirstBlockParent(),"ul,ol,menu")&&this.execCommand("outdent")},tooltip:"Remove one indent"},table:{exec:function(e){var t=this,n=a("div");u(n,X("table",{rows:t._("Rows:"),cols:t._("Cols:"),insert:t._("Insert")},!0)),f(n,"click",".button",function(e){var o=Number(d(n,"#rows")[0].value),r=Number(d(n,"#cols")[0].value),i="<table>";o>0&&r>0&&(i+=Array(o+1).join("<tr>"+Array(r+1).join("<td><br /></td>")+"</tr>"),i+="</table>",t.wysiwygEditorInsertHtml(i),t.closeDropDown(!0),e.preventDefault())}),t.createDropDown(e,"inserttable",n)},tooltip:"Insert a table"},horizontalrule:{exec:"inserthorizontalrule",tooltip:"Insert a horizontal rule"},code:{exec:function(){this.wysiwygEditorInsertHtml("<code>","<br /></code>")},tooltip:"Code"},image:{_dropDown:function(e,t,n,o){var r=a("div");u(r,X("image",{url:e._("URL:"),width:e._("Width (optional):"),height:e._("Height (optional):"),insert:e._("Insert")},!0));var i=d(r,"#image")[0];i.value=n,f(r,"click",".button",function(t){i.value&&o(i.value,d(r,"#width")[0].value,d(r,"#height")[0].value),e.closeDropDown(!0),t.preventDefault()}),e.createDropDown(t,"insertimage",r)},exec:function(e){var t=this;ve.image._dropDown(t,e,"",function(e,n,o){var r="";n&&(r+=' width="'+parseInt(n,10)+'"'),o&&(r+=' height="'+parseInt(o,10)+'"'),r+=' src="'+K(e)+'"',t.wysiwygEditorInsertHtml("<img"+r+" />")})},tooltip:"Insert an image"},email:{_dropDown:function(e,t,n){var o=a("div");u(o,X("email",{label:e._("E-mail:"),desc:e._("Description (optional):"),insert:e._("Insert")},!0)),f(o,"click",".button",function(t){var r=d(o,"#email")[0].value;r&&n(r,d(o,"#des")[0].value),e.closeDropDown(!0),t.preventDefault()}),e.createDropDown(t,"insertemail",o)},exec:function(e){var t=this;ve.email._dropDown(t,e,function(e,n){!t.getRangeHelper().selectedHtml()||n?t.wysiwygEditorInsertHtml('<a href="mailto:'+K(e)+'">'+K(n||e)+"</a>"):t.execCommand("createlink","mailto:"+e)})},tooltip:"Insert an email"},link:{_dropDown:function(e,t,n){function o(t){i.value&&n(i.value,d(r,"#des")[0].value),e.closeDropDown(!0),t.preventDefault()}var r=a("div");u(r,X("link",{url:e._("URL:"),desc:e._("Description (optional):"),ins:e._("Insert")},!0));var i=d(r,"#link")[0];f(r,"click",".button",o),f(r,"keypress",function(e){13===e.which&&i.value&&o(e)},!0),e.createDropDown(t,"insertlink",r)},exec:function(e){var t=this;ve.link._dropDown(t,e,function(e,n){n||!t.getRangeHelper().selectedHtml()?t.wysiwygEditorInsertHtml('<a href="'+K(e)+'">'+K(n||e)+"</a>"):t.execCommand("createlink",e)})},tooltip:"Insert a link"},unlink:{state:function(){return s(this.currentNode(),"a")?0:-1},exec:function(){var e=s(this.currentNode(),"a");if(e){for(;e.firstChild;)k(e.firstChild,e);c(e)}},tooltip:"Unlink"},quote:{exec:function(e,t,n){var o="<blockquote>",r="</blockquote>";t?(o=o+(n=n?"<cite>"+K(n)+"</cite>":"")+t+r,r=null):""===this.getRangeHelper().selectedHtml()&&(r="<br />"+r),this.wysiwygEditorInsertHtml(o,r)},tooltip:"Insert a Quote"},emoticon:{exec:function(e){var t=this,o=function(i){var l,s=t.opts,c=s.emoticonsRoot||"",d=s.emoticonsCompat,p=t.getRangeHelper(),h=d&&" "!==p.getOuterText(!0,1)?" ":"",g=d&&" "!==p.getOuterText(!1,1)?" ":"",v=a("div"),y=a("div"),p=n({},s.emoticons.dropdown,i?s.emoticons.more:{});return u(v,y),l=Math.sqrt(Object.keys(p).length),f(v,"click","img",function(e){t.insert(h+m(this,"alt")+g,null,!1).closeDropDown(!0),e.preventDefault()}),r(p,function(e,t){u(y,a("img",{src:c+(t.url||t),alt:e,title:t.tooltip||e})),y.children.length>=l&&(y=a("div"),u(v,y))}),!i&&s.emoticons.more&&(u(s=a("a",{className:"sceditor-more"}),document.createTextNode(t._("More"))),f(s,"click",function(n){t.createDropDown(e,"more-emoticons",o(!0)),n.preventDefault()}),u(v,s)),v};t.createDropDown(e,"emoticons",o(!1))},txtExec:function(e){ve.emoticon.exec.call(this,e)},tooltip:"Insert an emoticon"},youtube:{_dropDown:function(e,t,n){var o=a("div");u(o,X("youtubeMenu",{label:e._("Video URL:"),insert:e._("Insert")},!0)),f(o,"click",".button",function(t){var i=(a=d(o,"#link")[0].value).match(/(?:v=|v\/|embed\/|youtu.be\/)?([a-zA-Z0-9_-]{11})/),a=a.match(/[&|?](?:star)?t=((\d+[hms]?){1,3})/),l=0;a&&r(a[1].split(/[hms]/),function(e,t){""!==t&&(l=60*l+Number(t))}),i&&/^[a-zA-Z0-9_\-]{11}$/.test(i[1])&&n(i[1],l),e.closeDropDown(!0),t.preventDefault()}),e.createDropDown(t,"insertlink",o)},exec:function(e){var t=this;ve.youtube._dropDown(t,e,function(e,n){t.wysiwygEditorInsertHtml(X("youtube",{id:e,time:n}))})},tooltip:"Insert a YouTube video"},date:{_date:function(e){var t=new Date,n=t.getYear(),o=t.getMonth()+1;return 2e3>n&&(n=1900+n),10>o&&(o="0"+o),(t=t.getDate())<10&&(t="0"+t),e.opts.dateFormat.replace(/year/i,n).replace(/month/i,o).replace(/day/i,t)},exec:function(){this.insertText(ve.date._date(this))},txtExec:function(){this.insertText(ve.date._date(this))},tooltip:"Insert current date"},time:{_time:function(){var e=new Date,t=e.getHours(),n=e.getMinutes();return(t=10>t?"0"+t:t)+":"+(n=10>n?"0"+n:n)+":"+((e=e.getSeconds())<10?"0"+e:e)},exec:function(){this.insertText(ve.time._time())},txtExec:function(){this.insertText(ve.time._time())},tooltip:"Insert current time"},ltr:{state:function(e,t){return t&&"ltr"===t.style.direction},exec:function(){var e=this.getRangeHelper(),t=e.getFirstBlockParent();this.focus(),(t&&!w(t,"body")||(this.execCommand("formatBlock","p"),(t=e.getFirstBlockParent())&&!w(t,"body")))&&(e="ltr"===b(t,"direction")?"":"ltr",b(t,"direction",e))},tooltip:"Left-to-Right"},rtl:{state:function(e,t){return t&&"rtl"===t.style.direction},exec:function(){var e=this.getRangeHelper(),t=e.getFirstBlockParent();this.focus(),(t&&!w(t,"body")||(this.execCommand("formatBlock","p"),(t=e.getFirstBlockParent())&&!w(t,"body")))&&(e="rtl"===b(t,"direction")?"":"rtl",b(t,"direction",e))},tooltip:"Right-to-Left"},print:{exec:"print",tooltip:"Print"},maximize:{state:function(){return this.maximize()},exec:function(){this.maximize(!this.maximize()),this.focus()},txtExec:function(){this.maximize(!this.maximize()),this.focus()},tooltip:"Maximize",shortcut:"Ctrl+Shift+M"},source:{state:function(){return this.sourceMode()},exec:function(){this.toggleSourceMode(),this.focus()},txtExec:function(){this.toggleSourceMode(),this.focus()},tooltip:"View source",shortcut:"Ctrl+Shift+S"},ignore:{}},ye={};Z.plugins=ye;var be,xe,we,ke=function(e,t,n){var o,r,i,a,l,s="",c=e.startContainer,u=e.startOffset;for(c&&3!==c.nodeType&&(c=c.childNodes[u],u=0),i=a=u;n>s.length&&c&&3===c.nodeType;)o=c.nodeValue,r=n-s.length,l&&(a=o.length,i=0),l=c,c=t?(u=i=Math.max(a-r,0),s=o.substr(i,a-i)+s,l.previousSibling):(u=i+(a=Math.min(r,o.length)),s+=o.substr(i,a),l.nextSibling);return{node:l||c,offset:u,text:s}},Te=navigator.userAgent,Ce=/iPhone|iPod|iPad| wosbrowser\//i.test(Te),Se=(xe=!!window.document.documentMode,_e="-ms-ime-align"in document.documentElement.style,(He=document.createElement("div")).contentEditable=!0,"contentEditable"in document.documentElement&&"true"===He.contentEditable&&(He=/Opera Mobi|Opera Mini/i.test(Te),/Android/i.test(Te)&&(He=!0,/Safari/.test(Te)&&(He=!(be=/Safari\/(\d+)/.exec(Te))||!be[1]||be[1]<534)),/ Silk\//i.test(Te)&&(He=!(be=/AppleWebKit\/(\d+)/.exec(Te))||!be[1]||be[1]<534),Ce&&(He=/OS [0-4](_\d)+ like Mac/i.test(Te)),/Firefox/i.test(Te)&&(He=!1),/OneBrowser/i.test(Te)&&(He=!1),"UCWEB"===navigator.vendor&&(He=!1),!(He=!(!xe&&!_e)||He))),Ee=Object.hasOwnProperty,De=Object.setPrototypeOf,Ne=Object.isFrozen,Ae=Object.getPrototypeOf,Me=Object.getOwnPropertyDescriptor,Re=Object.freeze,_e=Object.seal,Oe=Object.create,He="undefined"!=typeof Reflect&&Reflect,Ie=(Ie=He.apply)||function(e,t,n){return e.apply(t,n)},Re=Re||function(e){return e},_e=_e||function(e){return e},Fe=(Fe=He.construct)||function(e,t){return new(Function.prototype.bind.apply(e,[null].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(t))))},Be=ee(Array.prototype.forEach),ze=ee(Array.prototype.pop),Le=ee(Array.prototype.push),Pe=ee(String.prototype.toLowerCase),je=ee(String.prototype.match),Ue=ee(String.prototype.replace),We=ee(String.prototype.indexOf),qe=ee(String.prototype.trim),Ve=ee(RegExp.prototype.test),$e=(we=TypeError,function(){for(var e=arguments.length,t=Array(e),n=0;e>n;n++)t[n]=arguments[n];return Fe(we,t)}),Ge=Re(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Ye=Re(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),Ke=Re(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Xe=Re(["animate","color-profile","cursor","discard","fedropshadow","feimage","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Qe=Re(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover"]),Ze=Re(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Je=Re(["#text"]),et=Re(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns"]),tt=Re(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),nt=Re(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),ot=Re(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),rt=_e(/\{\{[\s\S]*|[\s\S]*\}\}/gm),it=_e(/<%[\s\S]*|[\s\S]*%>/gm),at=_e(/^data-[\-\w.\u00B7-\uFFFF]/),lt=_e(/^aria-[\-\w]+$/),st=_e(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ct=_e(/^(?:\w+script|data):/i),ut=_e(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ft=function gt(e){function t(e){return gt(e)}function n(e){ke&&ke===e||(G="ALLOWED_TAGS"in(e=ne(e=e&&"object"===(void 0===e?"undefined":dt(e))?e:{}))?te({},e.ALLOWED_TAGS):Y,K="ALLOWED_ATTR"in e?te({},e.ALLOWED_ATTR):X,xe="ADD_URI_SAFE_ATTR"in e?te(ne(we),e.ADD_URI_SAFE_ATTR):we,ye="ADD_DATA_URI_TAGS"in e?te(ne(be),e.ADD_DATA_URI_TAGS):be,Q="FORBID_TAGS"in e?te({},e.FORBID_TAGS):{},Z="FORBID_ATTR"in e?te({},e.FORBID_ATTR):{},L="USE_PROFILES"in e&&e.USE_PROFILES,J=!1!==e.ALLOW_ARIA_ATTR,ee=!1!==e.ALLOW_DATA_ATTR,ie=e.ALLOW_UNKNOWN_PROTOCOLS||!1,ae=e.SAFE_FOR_TEMPLATES||!1,le=e.WHOLE_DOCUMENT||!1,ue=e.RETURN_DOM||!1,de=e.RETURN_DOM_FRAGMENT||!1,fe=!1!==e.RETURN_DOM_IMPORT,pe=e.RETURN_TRUSTED_TYPE||!1,ce=e.FORCE_BODY||!1,me=!1!==e.SANITIZE_DOM,he=!1!==e.KEEP_CONTENT,ge=e.IN_PLACE||!1,$=e.ALLOWED_URI_REGEXP||$,ae&&(ee=!1),de&&(ue=!0),L&&(G=te({},[].concat(re(Je))),K=[],!0===L.html&&(te(G,Ge),te(K,et)),!0===L.svg&&(te(G,Ye),te(K,tt),te(K,ot)),!0===L.svgFilters&&(te(G,Ke),te(K,tt),te(K,ot)),!0===L.mathMl&&(te(G,Qe),te(K,nt),te(K,ot))),e.ADD_TAGS&&te(G=G===Y?ne(G):G,e.ADD_TAGS),e.ADD_ATTR&&te(K=K===X?ne(K):K,e.ADD_ATTR),e.ADD_URI_SAFE_ATTR&&te(xe,e.ADD_URI_SAFE_ATTR),he&&(G["#text"]=!0),le&&te(G,["html","head","body"]),G.table&&(te(G,["tbody"]),delete Q.tbody),Re&&Re(e),ke=e)}function o(e){Le(t.removed,{element:e});try{e.parentNode.removeChild(e)}catch(n){try{e.outerHTML=M}catch(o){e.remove()}}}function r(e,n){try{Le(t.removed,{attribute:n.getAttributeNode(e),from:n})}catch(o){Le(t.removed,{attribute:null,from:n})}n.removeAttribute(e)}function i(e){var t=void 0,n=void 0;ce?e="<remove></remove>"+e:n=(o=je(e,/^[\r\n\t ]+/))&&o[0];var o,r=A?A.createHTML(e):e;try{t=(new C).parseFromString(r,"text/html")}catch(i){}return t&&t.documentElement||((o=(t=R.createHTMLDocument("")).body).parentNode.removeChild(o.parentNode.firstElementChild),o.outerHTML=r),e&&n&&t.body.insertBefore(m.createTextNode(n),t.body.childNodes[0]||null),O.call(t,le?"html":"body")[0]}function a(e){return _.call(e.ownerDocument||e,e,b.SHOW_ELEMENT|b.SHOW_COMMENT|b.SHOW_TEXT,function(){return b.FILTER_ACCEPT},!1)}function l(e){return"object"===(void 0===v?"undefined":dt(v))?e instanceof v:e&&"object"===(void 0===e?"undefined":dt(e))&&"number"==typeof e.nodeType&&"string"==typeof e.nodeName}function s(e,n,o){z[e]&&Be(z[e],function(e){e.call(t,n,o,ke)})}function c(e){if(s("beforeSanitizeElements",e,null),!((u=e)instanceof k||u instanceof T||"string"==typeof u.nodeName&&"string"==typeof u.textContent&&"function"==typeof u.removeChild&&u.attributes instanceof w&&"function"==typeof u.removeAttribute&&"function"==typeof u.setAttribute&&"string"==typeof u.namespaceURI&&"function"==typeof u.insertBefore)||je(e.nodeName,/[\u0080-\uFFFF]/))return o(e),1;var n,r,i,a,c,u=Pe(e.nodeName);if(s("uponSanitizeElement",e,{tagName:u,allowedTags:G}),!l(e.firstElementChild)&&(!l(e.content)||!l(e.content.firstElementChild))&&Ve(/<[/\w]/g,e.innerHTML)&&Ve(/<[/\w]/g,e.textContent))return o(e),1;if(G[u]&&!Q[u])return e instanceof y&&(n=e,(r=N(n))&&r.tagName||(r={namespaceURI:Me,tagName:"template"}),i=Pe(n.tagName),a=Pe(r.tagName),n.namespaceURI===Ae?r.namespaceURI===Me?"svg"!==i:r.namespaceURI===Ne?"svg"!==i||"annotation-xml"!==a&&!Ce[a]:!Boolean(Ee[i]):n.namespaceURI===Ne?r.namespaceURI===Me?"math"!==i:r.namespaceURI===Ae?"math"!==i||!Se[a]:!Boolean(De[i]):n.namespaceURI!==Me||r.namespaceURI===Ae&&!Se[a]||r.namespaceURI===Ne&&!Ce[a]||(a=te({},["title","style","font","a","script"]),!!De[i]||!a[i]&&!!Ee[i]))||("noscript"===u||"noembed"===u)&&Ve(/<\/no(script|embed)/i,e.innerHTML)?(o(e),1):(ae&&3===e.nodeType&&(c=Ue(c=e.textContent,P," "),c=Ue(c,j," "),e.textContent!==c&&(Le(t.removed,{element:e.cloneNode()}),e.textContent=c)),s("afterSanitizeElements",e,null),0);if(he&&!ve[u])for(var d=N(e),f=D(e),p=f.length-1;p>=0;--p)d.insertBefore(S(f[p],!0),E(e));return o(e),1}function u(e,t,n){return!(me&&("id"===t||"name"===t)&&(n in m||n in Te)||!(ee&&Ve(U,t)||J&&Ve(W,t))&&(!K[t]||Z[t]||!xe[t]&&!Ve($,Ue(n,V,""))&&("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==We(n,"data:")||!ye[e])&&(!ie||Ve(q,Ue(n,V,"")))&&n))}function d(e){var n,o=void 0,i=void 0;s("beforeSanitizeAttributes",e,null);var a=e.attributes;if(a){for(var l={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:K},i=a.length;i--;){var c=(n=a[i]).name,d=n.namespaceURI,o=qe(n.value),f=Pe(c);if(l.attrName=f,l.attrValue=o,l.keepAttr=!0,l.forceKeepAttr=void 0,s("uponSanitizeAttribute",e,l),
o=l.attrValue,!l.forceKeepAttr&&(r(c,e),l.keepAttr))if(Ve(/\/>/i,o))r(c,e);else if(ae&&(o=Ue(o,P," "),o=Ue(o,j," ")),u(e.nodeName.toLowerCase(),f,o))try{d?e.setAttributeNS(d,c,o):e.setAttribute(c,o),ze(t.removed)}catch(p){}}s("afterSanitizeAttributes",e,null)}}var f=0<arguments.length&&void 0!==e?e:"undefined"==typeof window?null:window;if(t.version="2.2.6",t.removed=[],!f||!f.document||9!==f.document.nodeType)return t.isSupported=!1,t;var p=f.document,m=f.document,h=f.DocumentFragment,g=f.HTMLTemplateElement,v=f.Node,y=f.Element,b=f.NodeFilter,x=f.NamedNodeMap,w=void 0===x?f.NamedNodeMap||f.MozNamedAttrMap:x,k=f.Text,T=f.Comment,C=f.DOMParser,e=f.trustedTypes,S=oe(x=y.prototype,"cloneNode"),E=oe(x,"nextSibling"),D=oe(x,"childNodes"),N=oe(x,"parentNode");"function"!=typeof g||(g=m.createElement("template")).content&&g.content.ownerDocument&&(m=g.content.ownerDocument);var A=function(e,t){if("object"!==(void 0===e?"undefined":dt(e))||"function"!=typeof e.createPolicy)return null;var n=null,o="data-tt-policy-suffix",r="dompurify"+((n=t.currentScript&&t.currentScript.hasAttribute(o)?t.currentScript.getAttribute(o):n)?"#"+n:"");try{return e.createPolicy(r,{createHTML:function(e){return e}})}catch(i){return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(e,p),M=A&&pe?A.createHTML(""):"",R=m.implementation,_=m.createNodeIterator,O=m.getElementsByTagName,H=m.createDocumentFragment,I=p.importNode,F={};try{F=ne(m).documentMode?m.documentMode:{}}catch(B){}var z={};t.isSupported=R&&void 0!==R.createHTMLDocument&&9!==F;var L,P=rt,j=it,U=at,W=lt,q=ct,V=ut,$=st,G=null,Y=te({},[].concat(re(Ge),re(Ye),re(Ke),re(Qe),re(Je))),K=null,X=te({},[].concat(re(et),re(tt),re(nt),re(ot))),Q=null,Z=null,J=!0,ee=!0,ie=!1,ae=!1,le=!1,se=!1,ce=!1,ue=!1,de=!1,fe=!0,pe=!1,me=!0,he=!0,ge=!1,ve=te({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]),ye=null,be=te({},["audio","video","img","source","image","track"]),xe=null,we=te({},["alt","class","for","id","label","name","pattern","placeholder","summary","title","value","style","xmlns"]),ke=null,Te=m.createElement("form"),Ce=te({},["mi","mo","mn","ms","mtext"]),Se=te({},["foreignobject","desc","title","annotation-xml"]),Ee=te({},Ye);te(Ee,Ke),te(Ee,Xe);var De=te({},Qe);te(De,Ze);var Ne="http://www.w3.org/1998/Math/MathML",Ae="http://www.w3.org/2000/svg",Me="http://www.w3.org/1999/xhtml";return t.sanitize=function(e,r){var u,m=void 0,g=void 0,y=void 0;if("string"!=typeof(e=e||"<!-->")&&!l(e)){if("function"!=typeof e.toString)throw $e("toString is not a function");if("string"!=typeof(e=e.toString()))throw $e("dirty is not a string, aborting")}if(!t.isSupported){if("object"===dt(f.toStaticHTML)||"function"==typeof f.toStaticHTML){if("string"==typeof e)return f.toStaticHTML(e);if(l(e))return f.toStaticHTML(e.outerHTML)}return e}if(se||n(r),t.removed=[],!(ge="string"!=typeof e&&ge))if(e instanceof v)1===(r=(m=i("<!---->")).ownerDocument.importNode(e,!0)).nodeType&&"BODY"===r.nodeName||"HTML"===r.nodeName?m=r:m.appendChild(r);else{if(!ue&&!ae&&!le&&-1===e.indexOf("<"))return A&&pe?A.createHTML(e):e;if(!(m=i(e)))return ue?null:M}m&&ce&&o(m.firstChild);for(var b=a(ge?e:m);u=b.nextNode();)3===u.nodeType&&u===g||c(u)||(u.content instanceof h&&function x(e){var t,n=a(e);for(s("beforeSanitizeShadowDOM",e,null);t=n.nextNode();)s("uponSanitizeShadowNode",t,null),c(t)||(t.content instanceof h&&x(t.content),d(t));s("afterSanitizeShadowDOM",e,null)}(u.content),d(u),g=u);if(g=null,ge)return e;if(ue){if(de)for(y=H.call(m.ownerDocument);m.firstChild;)y.appendChild(m.firstChild);else y=m;return fe?I.call(p,y,!0):y}return e=le?m.outerHTML:m.innerHTML,ae&&(e=Ue(e,P," "),e=Ue(e,j," ")),A&&pe?A.createHTML(e):e},t.setConfig=function(e){n(e),se=!0},t.clearConfig=function(){ke=null,se=!1},t.isValidAttribute=function(e,t,o){return ke||n({}),u(e=Pe(e),t=Pe(t),o)},t.addHook=function(e,t){"function"==typeof t&&(z[e]=z[e]||[],Le(z[e],t))},t.removeHook=function(e){z[e]&&ze(z[e])},t.removeHooks=function(e){z[e]&&(z[e]=[])},t.removeAllHooks=function(){z={}},t}(),pt=window,mt=document,ht=/^image\/(p?jpe?g|gif|png|bmp)$/i;ie.locale={},ie.formats={},ie.icons={},ie.command={get:function(e){return ve[e]||null},set:function(e,t){return!(!e||!t)&&((t=n(ve[e]||{},t)).remove=function(){ie.command.remove(e)},ve[e]=t,this)},remove:function(e){return ve[e]&&delete ve[e],this}},window.sceditor={command:ie.command,commands:ve,defaultOptions:me,ios:Ce,isWysiwygSupported:Se,regexEscape:Y,escapeEntities:K,escapeUriScheme:function(e){var t,n=window.location;return e&&/^[^\/]*:/i.test(e)&&!he.test(e)?((t=n.pathname.split("/")).pop(),n.protocol+"//"+n.host+t.join("/")+"/"+e):e},dom:{css:b,attr:m,removeAttr:h,is:w,closest:s,width:N,height:A,traverse:_,rTraverse:O,parseHTML:H,hasStyling:I,convertElement:F,blockLevelList:pe,canHaveChildren:B,isInline:z,copyCSS:function(e,t){t.style&&e.style&&(t.style.cssText=e.style.cssText+t.style.cssText)},fixNesting:P,findCommonAncestor:function(e,t){for(;e=e.parentNode;)if(e!==t&&e.contains&&e.contains(t))return e},getSibling:j,removeWhiteSpace:U,extractContents:W,getOffset:q,getStyle:V,hasStyle:function(e,t,n){return!!(t=V(e,t))&&(!n||t===n||Array.isArray(n)&&-1<n.indexOf(t))}},locale:ie.locale,icons:ie.icons,utils:{each:r,isEmptyObject:t,extend:n},plugins:Z.plugins,formats:ie.formats,create:function(e,t){t=t||{},l(e,".sceditor-container")||(t.runWithoutWysiwygSupport||Se)&&new ie(e,t)},instance:function(e){return e._sceditor}},ae["default"].sceditor=window.sceditor,ae["default"].fn.sceditor=function(e){var t,n=[];return this.each(function(){t=this._sceditor,"state"===e?n.push(!!t):"instance"===e?n.push(t):t||ae["default"].sceditor.create(this,e)}),n.length?1===n.length?n[0]:n:this}}(),function(e){"use strict";function t(e,t){return e.replace(/\{([^}]+)\}/g,function(e,n){var o=!0;return"!"===n.charAt(0)&&(o=!1,n=n.substring(1)),"0"===n&&(o=!1),void 0===t[n]?e:o?c(t[n],!0):t[n]})}function n(e){return"function"==typeof e}function o(e){return e&&e.replace(/\\(.)/g,"$1").replace(/^(["'])(.*?)\1$/,"$2")}function r(e,t,n,o,r,i){var a=this;a.type=e,a.name=t,a.val=n,a.attrs=o||{},a.children=r||[],a.closing=i||null}function i(e){function a(e,t){var n,i,a;return e===T&&(n=t.match(/\[([^\]\s=]+)(?:([^\]]+))?\]/))&&(a=f(n[1]),n[2]&&(n[2]=n[2].trim())&&(i=function(e){var t,n=/([^\s=]+)=(?:(?:(["'])((?:\\\2|[^\2])*?)\2)|((?:.(?!\s\S+=))*.))/g,r={};if("="===e.charAt(0)&&0>e.indexOf("=",1))r.defaultattr=o(e.substr(1));else for("="===e.charAt(0)&&(e="defaultattr"+e);t=n.exec(e);)r[f(t[1])]=o(t[3])||t[4];return r}(n[2]))),e===E&&(n=t.match(/\[\/([^\[\]]+)\]/))&&(a=f(n[1])),(a=e===S?"#newline":a)&&(e!==T&&e!==E||k[a])||(e=C,a="#"),new r(e,a,t,i)}function l(e,t,n){for(var o=n.length;o--;)if(n[o].type===t&&n[o].name===e)return 1}function s(e,t){return e=(e?k[e.name]:{}).allowedChildren,!p.opts.fixInvalidChildren||!e||-1<e.indexOf(t.name||"#")}function u(e,t,o){var r=/\s|=/.test(e);return n(t)?t(e,o):t===x.never||t===x.auto&&!r?e:'"'+e.replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'"'}function d(e){return e.length?e[e.length-1]:null}function f(e){return e.toLowerCase()}var p=this;p.opts=g({},i.defaults,e),p.tokenize=function(e){var t,n,o,r=[],i=[{type:C,regex:/^([^\[\r\n]+|\[)/},{type:S,regex:/^(\r\n|\r|\n)/},{type:T,regex:/^\[[^\[\]]+\]/},{type:E,regex:/^\[\/[^\[\]]+\]/}];e:for(;e.length;){for(o=i.length;o--;)if(n=i[o].type,(t=e.match(i[o].regex))&&t[0]){r.push(a(n,t[0])),e=e.substr(t[0].length);continue e}e.length&&r.push(a(C,e)),e=""}return r},p.parse=function(e,t){var n=function(e){function t(){return d(h)}function n(e){(t()?t().children:m).push(e)}function o(e){return t()&&(i=k[t().name])&&i.closedBy&&-1<i.closedBy.indexOf(e)}for(var r,i,a,c,u,f=[],m=[],h=[];r=e.shift();)switch(u=e[0],s(t(),r)||r.type===E&&t()&&r.name===t().name||(r.name="#",r.type=C),r.type){case T:o(r.name)&&h.pop(),n(r),(i=k[r.name])&&!i.isSelfClosing&&(i.closedBy||l(r.name,E,e))?h.push(r):i&&i.isSelfClosing||(r.type=C);break;case E:if(t()&&r.name!==t().name&&o("/"+r.name)&&h.pop(),t()&&r.name===t().name)t().closing=r,h.pop();else if(l(r.name,T,h)){for(;a=h.pop();){if(a.name===r.name){a.closing=r;break}a=a.clone(),f.length&&a.children.push(d(f)),f.push(a)}for(u&&u.type===S&&(i=k[r.name])&&!1===i.isInline&&(n(u),e.shift()),n(d(f)),c=f.length;c--;)h.push(f[c]);f.length=0}else r.type=C,n(r);break;case S:t()&&u&&o((u.type===E?"/":"")+u.name)&&(u.type===E&&u.name===t().name||((i=k[t().name])&&i.breakAfter||i&&!1===i.isInline&&p.opts.breakAfterBlock&&!1!==i.breakAfter)&&h.pop()),n(r);break;default:n(r)}return m}(p.tokenize(e)),e=p.opts;return e.fixInvalidNesting&&function o(e,t,n,r){var i,a,l,c,u,f=function(e){var e=k[e.name];return!e||!1!==e.isInline};for(a=0,t=t||[],r=r||e;a<e.length;a++)if((i=e[a])&&i.type===T){if(n&&!f(i)&&(c=(p=d(t)).splitAt(i),l=1<t.length?t[t.length-2].children:r,s(i,p)&&((u=p.clone()).children=i.children,i.children=[u]),-1<(u=l.indexOf(p)))){c.children.splice(0,1),l.splice(u+1,0,i,c);var p=c.children[0];return void(p&&p.type===S&&(f(i)||(c.children.splice(0,1),l.splice(u+2,0,p))))}t.push(i),o(i.children,t,n||f(i),r),t.pop()}}(n),function r(e,t,n){var o,i,a,l,s,c,u,d,f=e.length;t&&(l=k[t.name]);for(var m=f;m--;)(o=e[m])&&(o.type===S?(i=m>0?e[m-1]:null,a=f-1>m?e[m+1]:null,d=!1,!n&&l&&!0!==l.isSelfClosing&&(i?c||a||(!1===l.isInline&&p.opts.breakEndBlock&&!1!==l.breakEnd&&(d=!0),l.breakEnd&&(d=!0),c=d):(!1===l.isInline&&p.opts.breakStartBlock&&!1!==l.breakStart&&(d=!0),l.breakStart&&(d=!0))),i&&i.type===T&&(s=k[i.name])&&(n?!1===s.isInline&&(d=!0):(!1===s.isInline&&p.opts.breakAfterBlock&&!1!==s.breakAfter&&(d=!0),s.breakAfter&&(d=!0))),!n&&!u&&a&&a.type===T&&(s=k[a.name])&&(!1===s.isInline&&p.opts.breakBeforeBlock&&!1!==s.breakBefore&&(d=!0),s.breakBefore&&(d=!0),u=d)?e.splice(m,1):(d&&e.splice(m,1),u=!1)):o.type===T&&r(o.children,o,n))}(n,null,t),e.removeEmptyTags&&function i(e){for(var t,n,o=e.length;o--;)(t=e[o])&&t.type===T&&(n=k[t.name],i(t.children),function(e){for(var t=e.length;t--;){var n=e[t].type;if(n===T||n===E||n===C&&/\S|\u00A0/.test(e[t].val))return!1}return!0}(t.children)&&n&&!n.isSelfClosing&&!n.allowsEmpty&&e.splice.apply(e,[o,1].concat(t.children)))}(n),n},p.toHTML=function(e,o){return function r(e,o){var i,a,l,s,u,d,f,m="";for(d=function(e){return!1!==(!e||(void 0!==e.isHtmlInline?e.isHtmlInline:e.isInline))};0<e.length;)if(i=e.shift()){if(i.type===T)f=i.children[i.children.length-1]||{},a=k[i.name],s=o&&d(a),l=r(i.children,!1),l=a&&a.html?(d(a)||!d(k[f.name])||a.isPreFormatted||a.skipLastLineBreak||(l+="<br />"),n(a.html)?a.html.call(p,i,i.attrs,l):(i.attrs[0]=l,t(a.html,i.attrs))):i.val+l+(i.closing?i.closing.val:"");else{if(i.type===S){if(!o){m+="<br />";continue}u||(m+="<ddiv>"),m+="<br />",e.length||(m+="<br />"),m+="</ddiv>\n",u=!1;continue}s=o,l=c(i.val,!0)}s&&!u?(m+="<ddiv>",u=!0):!s&&u&&(m+="</ddiv>\n",u=!1),m+=l}return u&&(m+="</ddiv>\n"),m}(p.parse(e,o),!0)},p.toBBCode=function(e,t){return function n(e){for(var t,o,r,i,a,l,s,c,d,f="";0<e.length;)if(t=e.shift())if(d=!(!(r=k[t.name])||!1!==r.isInline),i=r&&r.isSelfClosing,l=d&&p.opts.breakBeforeBlock&&!1!==r.breakBefore||r&&r.breakBefore,s=d&&!i&&p.opts.breakStartBlock&&!1!==r.breakStart||r&&r.breakStart,c=d&&p.opts.breakEndBlock&&!1!==r.breakEnd||r&&r.breakEnd,d=d&&p.opts.breakAfterBlock&&!1!==r.breakAfter||r&&r.breakAfter,a=(r?r.quoteType:null)||p.opts.quoteType||x.auto,r||t.type!==T)if(t.type===T){if(l&&(f+="\n"),f+="["+t.name,t.attrs)for(o in t.attrs.defaultattr&&(f+="="+u(t.attrs.defaultattr,a,"defaultattr"),delete t.attrs.defaultattr),t.attrs)t.attrs.hasOwnProperty(o)&&(f+=" "+o+"="+u(t.attrs[o],a,o));f+="]",s&&(f+="\n"),t.children&&(f+=n(t.children)),i||r.excludeClosing||(c&&(f+="\n"),f+="[/"+t.name+"]"),d&&(f+="\n"),t.closing&&i&&(f+=t.closing.val)}else f+=t.val;else f+=t.val,t.children&&(f+=n(t.children)),t.closing&&(f+=t.closing.val);return f}(p.parse(e,t))}}function a(e){return e=parseInt(e,10),isNaN(e)?"00":(e=Math.max(0,Math.min(e,255)).toString(16)).length<2?"0"+e:e}function l(e){var t;return(t=(e=e||"#000").match(/rgb\((\d{1,3}),\s*?(\d{1,3}),\s*?(\d{1,3})\)/i))?"#"+a(t[1])+a(t[2])+a(t[3]):(t=e.match(/#([0-f])([0-f])([0-f])\s*?$/i))?"#"+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]:e}function s(){function e(e,t,o){function r(t){var n=t[0],o=t[1],r=d.getStyle(e,n),t=e.parentNode;return!(!r||t&&d.hasStyle(t,n,r))&&(!o||o.includes(r))}function i(i){s[i]&&s[i][o]&&v(s[i][o],function(o,i){var a=k[o].strictMatch;if(void 0===a&&(a=l.opts.strictMatch),!i||i[a?"every":"some"]((s=a,function(t){var n=t[0],t=t[1];return("style"!==n||"CODE"!==e.nodeName)&&("style"===n&&t?t[s?"every":"some"](r):(n=m(e,n))&&(!t||t.includes(n)))}))){var s,o=k[o].format;return t=n(o)?o.call(l,e,t):function(e){var t=arguments;return e.replace(/\{(\d+)\}/g,function(e,n){return void 0!==t[+n+1]?t[+n+1]:"{"+n+"}"})}(o,t),!1}})}return i("*"),i(e.nodeName.toLowerCase()),t}function t(t){var n=function(t,o){var r="";return d.traverse(t,function(t){var i="",a=t.nodeType,l=t.nodeName.toLowerCase(),s=c[l],u=t.firstChild,f=!0;"object"==typeof o&&(f=-1<o.indexOf(l),(f=!(!h(t,"img")||!m(t,y))||f)||(s=o)),3!==a&&1!==a||(1===a?h(t,".sceditor-nlf")&&!u||("iframe"!==l&&(i=n(t,s)),f?("code"!==l&&(i=e(t,i,!1)),i=e(t,i,!0),r+=function(e,t){var n=e.nodeName.toLowerCase(),o=d.isInline;if(!o(e,!0)||"br"===n){for(var r,i,a=e.previousSibling;a&&1===a.nodeType&&!h(a,"br")&&o(a,!0)&&!a.firstChild;)a=a.previousSibling;for(;r=((i=e.parentNode)&&i.lastChild)===e,e=i,i&&r&&o(i,!0););r&&"li"!==n||(t+="\n"),"br"!==n&&a&&!h(a,"br")&&o(a,!0)&&(t="\n"+t)}return t}(t,i)):r+=i):r+=t.nodeValue)},!1,!0),r};return n(t)}function r(e,t,n){var o,r,t=new i(l.opts.parserOptions).toHTML(l.opts.bbcodeTrim?t.trim():t);return e||n?(e=t,r=document.createElement("div"),n=function(e,t){if(!d.hasStyling(e)){if(1!==e.childNodes.length||!h(e.firstChild,"br"))for(;o=e.firstChild;)r.insertBefore(o,e);!t||e!==(t=r.lastChild)&&h(t,"div")&&e.nextSibling===t&&r.insertBefore(document.createElement("br"),e),r.removeChild(e)}},p(r,"display","none"),r.innerHTML=e.replace(/<\/div>\n/g,"</div>"),(e=r.firstChild)&&h(e,"div")&&n(e,!0),(e=r.lastChild)&&h(e,"div")&&n(e),r.innerHTML):t}function a(e,n,o,r){var a,s=(o=o||document).createElement("div"),c=o.createElement("div"),u=new i(l.opts.parserOptions);for(c.innerHTML=n,p(s,"visibility","hidden"),s.appendChild(c),o.body.appendChild(s),e&&(s.insertBefore(o.createTextNode("#"),s.firstChild),s.appendChild(o.createTextNode("#"))),r&&p(c,"whiteSpace",p(r,"whiteSpace")),a=c.getElementsByClassName("sceditor-ignore");a.length;)a[0].parentNode.removeChild(a[0]);return d.removeWhiteSpace(s),c=t(c),o.body.removeChild(s),c=u.toBBCode(c,!0),c=l.opts.bbcodeTrim?c.trim():c}var l=this;l.stripQuotes=o;var s={},c={ul:["li","ol","ul"],ol:["li","ol","ul"],table:["tr"],tr:["td","th"],code:["br","p","div"]};l.init=function(){l.opts=this.opts,l.elementToBbcode=t,v(k,function(e,t){var n=!1===t.isInline,o=k[e].tags,t=k[e].styles;t&&(s["*"]=s["*"]||{},s["*"][n]=s["*"][n]||{},s["*"][n][e]=[["style",Object.entries(t)]]),o&&v(o,function(t,o){o&&o.style&&(o.style=Object.entries(o.style)),s[t]=s[t]||{},s[t][n]=s[t][n]||{},s[t][n][e]=o&&Object.entries(o)})}),this.commands=g(!0,{},w,this.commands),this.toBBCode=l.toSource,this.fromBBCode=l.toHtml},l.toHtml=r.bind(null,!1),l.fragmentToHtml=r.bind(null,!0),l.toSource=a.bind(null,!1),l.fragmentToSource=a.bind(null,!0)}var c=e.escapeEntities,u=e.escapeUriScheme,d=e.dom,f=e.utils,p=d.css,m=d.attr,h=d.is,g=f.extend,v=f.each,y="data-sceditor-emoticon",b=e.command.get,x={always:1,never:2,auto:3},w={bold:{txtExec:["[b]","[/b]"]},italic:{txtExec:["[i]","[/i]"]},underline:{txtExec:["[u]","[/u]"]},strike:{txtExec:["[s]","[/s]"]},subscript:{txtExec:["[sub]","[/sub]"]},superscript:{txtExec:["[sup]","[/sup]"]},left:{txtExec:["[left]","[/left]"]},center:{txtExec:["[center]","[/center]"]},right:{txtExec:["[right]","[/right]"]},justify:{txtExec:["[justify]","[/justify]"]},font:{txtExec:function(e){var t=this;b("font")._dropDown(t,e,function(e){t.insertText("[font="+e+"]","[/font]")})}},size:{txtExec:function(e){var t=this;b("size")._dropDown(t,e,function(e){t.insertText("[size="+e+"]","[/size]")})}},color:{txtExec:function(e){var t=this;b("color")._dropDown(t,e,function(e){t.insertText("[color="+e+"]","[/color]")})}},bulletlist:{txtExec:function(e,t){this.insertText("[ul]\n[li]"+t.split(/\r?\n/).join("[/li]\n[li]")+"[/li]\n[/ul]")}},orderedlist:{txtExec:function(e,t){this.insertText("[ol]\n[li]"+t.split(/\r?\n/).join("[/li]\n[li]")+"[/li]\n[/ol]")}},table:{txtExec:["[table][tr][td]","[/td][/tr][/table]"]},horizontalrule:{txtExec:["[hr]"]},code:{txtExec:["[code]","[/code]"]},image:{txtExec:function(e,t){var n=this;b("image")._dropDown(n,e,t,function(e,t,o){var r="";t&&(r+=" width="+t),o&&(r+=" height="+o),n.insertText("[img"+r+"]"+e+"[/img]")})}},email:{txtExec:function(e,t){var n=this;b("email")._dropDown(n,e,function(e,o){n.insertText("[email="+e+"]"+(o||t||e)+"[/email]")})}},link:{txtExec:function(e,t){var n=this;b("link")._dropDown(n,e,function(e,o){n.insertText("[url="+e+"]"+(o||t||e)+"[/url]")})}},quote:{txtExec:["[quote]","[/quote]"]},youtube:{txtExec:function(e){var t=this;b("youtube")._dropDown(t,e,function(e){t.insertText("[youtube]"+e+"[/youtube]")})}},rtl:{txtExec:["[rtl]","[/rtl]"]},ltr:{txtExec:["[ltr]","[/ltr]"]}},k={b:{tags:{b:null,strong:null},styles:{"font-weight":["bold","bolder","401","700","800","900"]},format:"[b]{0}[/b]",html:"<strong>{0}</strong>"},i:{tags:{i:null,em:null},styles:{"font-style":["italic","oblique"]},format:"[i]{0}[/i]",html:"<em>{0}</em>"},u:{tags:{u:null},styles:{"text-decoration":["underline"]},format:"[u]{0}[/u]",html:"<u>{0}</u>"},s:{tags:{s:null,strike:null},styles:{"text-decoration":["line-through"]},format:"[s]{0}[/s]",html:"<s>{0}</s>"},sub:{tags:{sub:null},format:"[sub]{0}[/sub]",html:"<sub>{0}</sub>"},sup:{tags:{sup:null},format:"[sup]{0}[/sup]",html:"<sup>{0}</sup>"},font:{tags:{font:{face:null}},styles:{"font-family":null},quoteType:x.never,format:function(e,t){var n;return"[font="+o(n=h(e,"font")&&(n=m(e,"face"))?n:p(e,"font-family"))+"]"+t+"[/font]"},html:'<font face="{defaultattr}">{0}</font>'},size:{tags:{font:{size:null}},styles:{"font-size":null},format:function(e,t){var n=m(e,"size"),o=2;return-1<(n=n||p(e,"fontSize")).indexOf("px")?((n=+n.replace("px",""))<12&&(o=1),n>15&&(o=3),n>17&&(o=4),n>23&&(o=5),n>31&&(o=6),n>47&&(o=7)):o=n,"[size="+o+"]"+t+"[/size]"},html:'<font size="{defaultattr}">{!0}</font>'},color:{tags:{font:{color:null}},styles:{color:null},quoteType:x.never,format:function(e,t){var n;return"[color="+l(n=h(e,"font")&&(n=m(e,"color"))?n:e.style.color||p(e,"color"))+"]"+t+"[/color]"},html:function(e,t,n){return'<font color="'+c(l(t.defaultattr),!0)+'">'+n+"</font>"}},ul:{tags:{ul:null},breakStart:!0,isInline:!1,skipLastLineBreak:!0,format:"[ul]{0}[/ul]",html:"<ul>{0}</ul>"},list:{breakStart:!0,isInline:!1,skipLastLineBreak:!0,html:"<ul>{0}</ul>"},ol:{tags:{ol:null},breakStart:!0,isInline:!1,skipLastLineBreak:!0,format:"[ol]{0}[/ol]",html:"<ol>{0}</ol>"},li:{tags:{li:null},isInline:!1,closedBy:["/ul","/ol","/list","*","li"],format:"[li]{0}[/li]",html:"<li>{0}</li>"},"*":{isInline:!1,closedBy:["/ul","/ol","/list","*","li"],html:"<li>{0}</li>"},tablew:{tags:{table:null},isInline:!1,isHtmlInline:!0,skipLastLineBreak:!0,format:"[table]{0}[/table]",html:"<tablew>{0}</tablew>"},trw:{tags:{tr:null},isInline:!1,skipLastLineBreak:!0,format:"[tr]{0}[/tr]",html:"<trw>{0}</trw>"},thw:{tags:{th:null},allowsEmpty:!0,isInline:!1,format:"[th]{0}[/th]",html:"<thw>{0}</thw>"},tdw:{tags:{td:null},allowsEmpty:!0,isInline:!1,format:"[td]{0}[/td]",html:"<tdw>{0}</tdw>"},emoticon:{allowsEmpty:!0,tags:{img:{src:null,"data-sceditor-emoticon":null}},format:function(e,t){return m(e,y)+t},html:"{0}"},hr:{tags:{hr:null},allowsEmpty:!0,isSelfClosing:!0,isInline:!1,format:"[hr]{0}",html:"<hr />"},img:{allowsEmpty:!0,tags:{img:{src:null}},allowedChildren:["#"],quoteType:x.never,format:function(e,t){var n="",o=function(t){return e.style?e.style[t]:null};return m(e,y)?t:(t=m(e,"width")||o("width"),o=m(e,"height")||o("height"),"[img"+(n=e.complete&&(t||o)||t&&o?"="+d.width(e)+"x"+d.height(e):n)+"]"+m(e,"src")+"[/img]")},html:function(e,t,n){var o="",r=t.width,i=t.height;return t.defaultattr&&(r=(t=t.defaultattr.split(/x/i))[0],i=2===t.length?t[1]:t[0]),void 0!==r&&(o+=' width="'+c(r,!0)+'"'),void 0!==i&&(o+=' height="'+c(i,!0)+'"'),"<img"+o+' src="'+u(n)+'" />'}},url:{allowsEmpty:!0,tags:{a:{href:null}},quoteType:x.never,format:function(e,t){return"mailto:"===(e=m(e,"href")).substr(0,7)?'[email="'+e.substr(7)+'"]'+t+"[/email]":"[url="+e+"]"+t+"[/url]"},html:function(e,t,n){return t.defaultattr=c(t.defaultattr,!0)||n,'<a href="'+u(t.defaultattr)+'">'+n+"</a>"}},email:{quoteType:x.never,html:function(e,t,n){return'<a href="mailto:'+(c(t.defaultattr,!0)||n)+'">'+n+"</a>"}},quote:{tags:{blockquote:null},isInline:!1,quoteType:x.never,format:function(e,t){for(var n,o="data-author",r="",i=e.children,a=0;!n&&a<i.length;a++)h(i[a],"cite")&&(n=i[a]);return(n||m(e,o))&&(r=n&&n.textContent||m(e,o),m(e,o,r),n&&e.removeChild(n),t=this.elementToBbcode(e),r="="+r.replace(/(^\s+|\s+$)/g,""),n&&e.insertBefore(n,e.firstChild)),"[quote"+r+"]"+t+"[/quote]"},html:function(e,t,n){return"<blockquote>"+(n=t.defaultattr?"<cite>"+c(t.defaultattr)+"</cite>"+n:n)+"</blockquote>"}},code:{tags:{code:null},isInline:!1,allowedChildren:["#","#newline"],format:"[code]{0}[/code]",html:"<code>{0}</code>"},left:{styles:{"text-align":["left","-webkit-left","-moz-left","-khtml-left"]},isInline:!1,allowsEmpty:!0,format:"[left]{0}[/left]",html:'<div align="left">{0}</div>'},center:{styles:{"text-align":["center","-webkit-center","-moz-center","-khtml-center"]},isInline:!1,allowsEmpty:!0,format:"[center]{0}[/center]",html:'<div align="center">{0}</div>'},right:{styles:{"text-align":["right","-webkit-right","-moz-right","-khtml-right"]},isInline:!1,allowsEmpty:!0,format:"[right]{0}[/right]",html:'<div align="right">{0}</div>'},justify:{styles:{"text-align":["justify","-webkit-justify","-moz-justify","-khtml-justify"]},isInline:!1,allowsEmpty:!0,format:"[justify]{0}[/justify]",html:'<div align="justify">{0}</div>'},youtube:{allowsEmpty:!0,tags:{iframe:{"data-youtube-id":null}},format:function(e,t){return(e=m(e,"data-youtube-id"))?"[youtube]"+e+"[/youtube]":t},html:'<iframe width="560" height="315" frameborder="0" src="https://www.youtube-nocookie.com/embed/{0}?wmode=opaque" data-youtube-id="{0}" allowfullscreen></iframe>'},rtl:{styles:{direction:["rtl"]},isInline:!1,format:"[rtl]{0}[/rtl]",html:'<div style="direction: rtl">{0}</div>'},ltr:{styles:{direction:["ltr"]},isInline:!1,format:"[ltr]{0}[/ltr]",html:'<div style="direction: ltr">{0}</div>'},ignore:{}},T="open",C="content",S="newline",E="close";r.prototype={clone:function(){return new r(this.type,this.name,this.val,g({},this.attrs),[],this.closing?this.closing.clone():null)},splitAt:function(e){var t=this.clone(),n=this.children.indexOf(e);return n>-1&&(e=this.children.length-n,t.children=this.children.splice(n,e)),t}},i.QuoteType=x,i.defaults={breakBeforeBlock:!1,breakStartBlock:!1,breakEndBlock:!1,breakAfterBlock:!0,removeEmptyTags:!0,fixInvalidNesting:!0,fixInvalidChildren:!0,quoteType:x.auto,strictMatch:!1},s.get=function(e){return k[e]||null},s.set=function(e,t){return e&&t&&((t=g(k[e]||{},t)).remove=function(){delete k[e]},k[e]=t),this},s.rename=function(e,t){return e in k&&(k[t]=k[e],delete k[e]),this},s.remove=function(e){return e in k&&delete k[e],this},s.formatBBCodeString=t,e.formats.bbcode=s,e.BBCodeParser=i}(sceditor);